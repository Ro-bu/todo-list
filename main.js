(()=>{"use strict";class e{constructor(e,t){this.name=e,this.color=t,this.tasks=[]}newName(e){this.name=e}newColor(e){this.color=e}addTask(e){this.tasks.push(e)}overWriteTasks(e){this.tasks=e}}class t{constructor(e,t,a=!1){this.name=e,this.date=t,this.done=a}newName(e){this.name=e}newDate(e){this.date=e}toggleDone(){this.done?this.done=!1:this.done=!0}}const a=()=>{document.querySelector("#task-error").textContent="",document.querySelector("#project-error").textContent="",document.querySelector("#project-name-error").textContent=""};class n{static saveData(e){localStorage.setItem("projectList",JSON.stringify(e))}static getData(){return JSON.parse(localStorage.getItem("projectList"))}}Math.pow(10,8);var r=36e5;function o(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function l(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function c(e,t){o(1,arguments);var a=t||{},n=null==a.additionalDigits?2:l(a.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,c=m(e);if(c.date){var d=p(c.date,n);r=h(d.restDateString,d.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var s,i=r.getTime(),u=0;if(c.time&&(u=k(c.time),isNaN(u)))return new Date(NaN);if(!c.timezone){var f=new Date(i+u),g=new Date(0);return g.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),g.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),g}return s=y(c.timezone),isNaN(s)?new Date(NaN):new Date(i+u+s)}var d={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},s=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,i=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){var t,a={},n=e.split(d.dateTimeDelimiter);if(n.length>2)return a;if(/:/.test(n[0])?t=n[0]:(a.date=n[0],t=n[1],d.timeZoneDelimiter.test(a.date)&&(a.date=e.split(d.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var r=d.timezone.exec(t);r?(a.time=t.replace(r[1],""),a.timezone=r[1]):a.time=t}return a}function p(e,t){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(a);if(!n)return{year:NaN,restDateString:""};var r=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:null===o?r:100*o,restDateString:e.slice((n[1]||n[2]).length)}}function h(e,t){if(null===t)return new Date(NaN);var a=e.match(s);if(!a)return new Date(NaN);var n=!!a[4],r=f(a[1]),o=f(a[2])-1,l=f(a[3]),c=f(a[4]),d=f(a[5])-1;if(n)return function(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}(0,c,d)?function(e,t,a){var n=new Date(0);n.setUTCFullYear(e,0,4);var r=7*(t-1)+a+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+r),n}(t,c,d):new Date(NaN);var i=new Date(0);return function(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(v[t]||(S(e)?29:28))}(t,o,l)&&function(e,t){return t>=1&&t<=(S(e)?366:365)}(t,r)?(i.setUTCFullYear(t,o,Math.max(r,l)),i):new Date(NaN)}function f(e){return e?parseInt(e):1}function k(e){var t=e.match(i);if(!t)return NaN;var a=g(t[1]),n=g(t[2]),o=g(t[3]);return function(e,t,a){return 24===e?0===t&&0===a:a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}(a,n,o)?a*r+6e4*n+1e3*o:NaN}function g(e){return e&&parseFloat(e.replace(",","."))||0}function y(e){if("Z"===e)return 0;var t=e.match(u);if(!t)return 0;var a="+"===t[1]?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?a*(n*r+6e4*o):NaN}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function S(e){return e%400==0||e%4==0&&e%100!=0}function D(e){o(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function E(e,t){o(2,arguments);var a=D(e),n=D(t),r=a.getTime()-n.getTime();return r<0?-1:r>0?1:r}function C(e,t){o(2,arguments);var a=D(e),n=l(t);return isNaN(n)?new Date(NaN):n?(a.setDate(a.getDate()+n),a):a}function q(e,t){o(2,arguments);var a=D(e),n=l(t);if(isNaN(n))return new Date(NaN);if(!n)return a;var r=a.getDate(),c=new Date(a.getTime());c.setMonth(a.getMonth()+n+1,0);var d=c.getDate();return r>=d?c:(a.setFullYear(c.getFullYear(),c.getMonth(),r),a)}const N=()=>{let a=[];return n.getData().forEach((n=>{let r=new e(n.name,n.color);n.tasks.forEach((e=>{r.addTask(new t(e.name,e.date,e.done))})),a.push(r)})),a},w=()=>{null!==n.getData()&&n.getData().forEach((e=>{(e=>{let t=document.createElement("li");t.dataset.project=e.name;let a=document.createElement("span"),n=document.createElement("span"),r=document.createElement("div");n.textContent="(0)",a.textContent=e.name,r.style.backgroundColor=e.color,t.appendChild(r),t.appendChild(a),t.appendChild(n),document.querySelector(".project-container ul").appendChild(t)})(e)}))},x=(e,t,a,n)=>{let r=document.createElement("li");r.dataset.projectIndex=a,r.dataset.taskIndex=n;let o=document.createElement("div");o.classList.add("color-block"),o.style.backgroundColor=t;let l=document.createElement("div");l.classList.add("task-container");let c=document.createElement("div");c.classList.add("task-and-checkbox");let d=document.createElement("div");if(d.classList.add("checkbox"),!0===e.done){d.classList.add("checked");let e=document.createElement("img");e.src="./img/check.png",d.appendChild(e)}let s=document.createElement("div");s.classList.add("task-name"),s.textContent=e.name;let i=document.createElement("div");i.classList.add("date-and-edit");let u=document.createElement("date");u.classList.add("date"),""===e.date?u.textContent="No due date":u.textContent=e.date;let m=document.createElement("span");m.classList.add("task-edit-button");let p=document.createElement("img");p.src="./img/credit-card-edit.png";let h=document.createElement("span"),f=document.createElement("img");f.src="./img/delete.png",r.appendChild(o),r.appendChild(l),l.appendChild(c),c.appendChild(d),c.appendChild(s),l.appendChild(i),i.appendChild(u),m.appendChild(p),h.appendChild(f),i.appendChild(m),i.appendChild(h),e.done?document.querySelector(".bot-content-block ul").append(r):document.querySelector(".bot-content-block ul").prepend(r)},j=()=>{if(null!==n.getData()){let e=n.getData(),t=0;e.forEach((e=>{let a=e.color,n=0;e.tasks.forEach((e=>{x(e,a,t,n),n++})),t++}))}},b=e=>{if(null!==n.getData()){let t=n.getData(),a=0;t.forEach((t=>{let n=0;if(t.name===e){let e=t.color;t.tasks.forEach((t=>{x(t,e,a,n),n++}))}a++}))}},T=()=>{let e=c((new Date).toISOString().split("T")[0]),t=n.getData(),a=0;t.forEach((t=>{let n=t.color,r=0;t.tasks.forEach((t=>{0===E(c(t.date),e)&&x(t,n,a,r),r++})),a++}))},I=()=>{let e=c((new Date).toISOString().split("T")[0]),t=function(e,t){if(o(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var a=t.years?l(t.years):0,n=t.months?l(t.months):0,r=t.weeks?l(t.weeks):0,c=t.days?l(t.days):0,d=t.hours?l(t.hours):0,s=t.minutes?l(t.minutes):0,i=t.seconds?l(t.seconds):0,u=D(e),m=n||a?q(u,n+12*a):u,p=c||r?C(m,c+7*r):m,h=1e3*(i+60*(s+60*d));return new Date(p.getTime()+h)}(e,{days:7}),a=n.getData(),r=0;a.forEach((a=>{let n=a.color,o=0;a.tasks.forEach((a=>{-1===E(c(a.date),t)&&-1!==E(c(a.date),e)&&x(a,n,r,o),o++})),r++}))},L=()=>{let e=document.querySelector(".bot-content-block ul");for(;e.firstChild;)e.removeChild(e.lastChild)},A=()=>{let e=document.querySelector(".list-name").textContent;switch(e){case"ALL":L(),j();break;case"TODAY":L(),T();break;case"WEEK":L(),I();break;default:L(),b(e)}Y()};class U{static add(){let e=document.querySelector(".list-edit-delete"),t=document.createElement("span");t.textContent="Edit";let a=document.createElement("span");a.textContent="Delete",e.append(t),e.append(a)}static clear(){let e=document.querySelector(".list-edit-delete");for(;e.firstChild;)e.removeChild(e.lastChild)}}const M=()=>{let e=document.querySelector(".list-name");document.querySelectorAll(".project-container ul li").forEach((t=>{t.addEventListener("click",(t=>{L(),e.textContent=String(t.target.closest("li").dataset.project),b(t.target.closest("li").dataset.project),Y(),U.clear(),U.add()}))}))},O=()=>{document.querySelectorAll(".date-and-edit span:last-child").forEach((e=>{e.addEventListener("click",(()=>{let t=N(),a=parseInt(e.parentElement.parentElement.parentElement.dataset.projectIndex),r=parseInt(e.parentElement.parentElement.parentElement.dataset.taskIndex);t[a].tasks.splice(r,1),n.saveData(t),A()}))}))},Y=()=>{document.querySelectorAll(".checkbox").forEach((e=>{e.addEventListener("click",(()=>{if(e.classList.contains("checked"))e.removeChild(e.lastChild);else{let t=document.createElement("img");t.src="./img/check.png",e.appendChild(t)}let t=N(),a=parseInt(e.parentElement.parentElement.parentElement.dataset.projectIndex),r=parseInt(e.parentElement.parentElement.parentElement.dataset.taskIndex);t[a].tasks[r].toggleDone(),n.saveData(t),e.classList.toggle("checked")}))})),O(),W()},F=()=>{document.querySelector("#project-modal").style.display="none"},Z=()=>{document.querySelector("#task-modal").style.display="none",delete document.querySelector("#task-modal .modal-top span:first-child").dataset.taskIndex,delete document.querySelector("#task-modal .modal-top span:first-child").dataset.projectIndex,document.querySelector("#task-modal .modal-top span:first-child").textContent="ADD TASK",document.querySelector("#task-form-submit").textContent="Add Task"},z=()=>{document.querySelector("#task-form").reset(),a(),$(),P(),document.querySelector("#task-modal").style.display="block"},K=()=>{let e=(()=>{let e=document.querySelector("#task").value,a=document.querySelector("#dueDate").value;return new t(e,a)})(),a=document.querySelector("#project").value,r=n.getData();r.forEach((t=>{t.name===a&&t.tasks.push(e)})),n.saveData(r)},$=()=>{let e=document.querySelector("#project");for(;e.firstChild;)e.removeChild(e.lastChild)},P=()=>{let e=document.querySelector("#project");if(null!==n.getData()){let t=n.getData();for(const a of t){let t=document.createElement("option");t.value=a.name,t.text=a.name,e.appendChild(t)}}},W=()=>{document.querySelectorAll(".task-edit-button").forEach((e=>{e.addEventListener("click",(()=>{z();let t=document.querySelector("#task-modal .modal-top span:first-child");t.textContent="EDIT TASK",document.querySelector("#task-form-submit").textContent="Edit Task";let a=n.getData(),r=parseInt(e.parentElement.parentElement.parentElement.dataset.projectIndex),o=parseInt(e.parentElement.parentElement.parentElement.dataset.taskIndex);t.dataset.projectIndex=r,t.dataset.taskIndex=o;let l=document.querySelector("#task"),c=document.querySelector("#dueDate"),d=document.querySelector("#project"),s=a[r].tasks[o];l.value=s.name,d.value=a[r].name,""!==s.date&&(c.value=s.date)}))}))};document.querySelector("#task-modal-close").addEventListener("click",(()=>{Z()})),document.querySelector(".add-task").addEventListener("click",(()=>{z()})),document.querySelector("#project-modal-close").addEventListener("click",(()=>{F()})),document.querySelector(".add-project").addEventListener("click",(()=>{document.querySelector("#project-form").reset(),a(),document.querySelector("#project-modal").style.display="block"})),window.addEventListener("click",(()=>{event.target==document.querySelector("#task-modal")?Z():event.target==document.querySelector("#project-modal")&&F()})),document.querySelector("#project-form-submit").addEventListener("click",(t=>{t.preventDefault(),(()=>{const e=document.querySelector("#name").value;let t=document.querySelector("#project-name-error"),a=!0;return""===e?(t.textContent="Please enter a name for the project.",a=!1):(t.textContent="",a=!0),!!a})()&&((()=>{let t=(()=>{let t=document.querySelector("#name").value,a=document.querySelector("#color").value;return new e(t,a)})();if(null===n.getData()){let e=[];e.push(t),n.saveData(e)}else{let e=n.getData();e.push(t),n.saveData(e)}})(),(()=>{let e=document.querySelector(".project-container ul");for(;e.firstChild;)e.removeChild(e.lastChild)})(),w(),M(),F())})),document.querySelector("#task-form-submit").addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=document.querySelector("#task").value,t=document.querySelector("#project").value;let a=document.querySelector("#task-error"),n=document.querySelector("#project-error"),r=!0,o=!0;return""===e?(a.textContent="Please enter a task name.",o=!1):(a.textContent="",o=!0),""===t&&null===document.querySelector("#project").firstChild?(n.textContent="Please create a project before adding a task.",r=!1):(n.textContent="",r=!0),!(!r||!o)})()&&("EDIT TASK"===document.querySelector("#task-modal .modal-top span:first-child").textContent?((()=>{let e=N(),t=document.querySelector("#task"),a=document.querySelector("#dueDate"),r=document.querySelector("#project"),o=parseInt(document.querySelector("#task-modal .modal-top span:first-child").dataset.projectIndex),l=parseInt(document.querySelector("#task-modal .modal-top span:first-child").dataset.taskIndex);r.value===e[o].name?(e[o].tasks[l].newName(t.value),e[o].tasks[l].newDate(a.value),n.saveData(e)):(e[o].tasks.splice(l,1),n.saveData(e),K())})(),Z(),A()):(K(),Z(),A()))})),document.querySelector("#task-form-cancel").addEventListener("click",(e=>{e.preventDefault(),Z()})),document.querySelector("#project-form-cancel").addEventListener("click",(e=>{e.preventDefault(),F()})),j(),w(),M(),(()=>{let e=document.querySelector(".list-name");document.querySelector("#all-tasks").addEventListener("click",(()=>{L(),e.textContent="ALL",j(),Y(),U.clear()})),document.querySelector("#today-tasks").addEventListener("click",(()=>{L(),e.textContent="TODAY",T(),Y(),U.clear()})),document.querySelector("#week-tasks").addEventListener("click",(()=>{L(),e.textContent="WEEK",I(),Y(),U.clear()}))})(),Y(),O()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEssUUFBUWlQLEVBQVFuSSxPQUN6RXhHLEVBQVE0TixTQUFTSCxLQUVqQkEsRUFBMEI1RCxHQUFjOUssTUFBTTRPLE9BQU83RCxFQUFXLEdBQ2hFOUosRUFBUTROLFNBQVNILEdBQ2pCZSxNQXFDUTJCLEdBQ0FoQyxJQUNBNUIsTUFFQWlDLElBQ0FMLElBQ0E1QixTQUlaMU0sU0FBU0MsY0FBYyxxQkFBcUJtTixpQkFBaUIsU0FBVUMsSUFDbkVBLEVBQUVvQyxpQkFDRm5CLE9BRUp0TyxTQUFTQyxjQUFjLHdCQUF3Qm1OLGlCQUFpQixTQUFVQyxJQUN0RUEsRUFBRW9DLGlCQUNGckIsT0MzS1JqRCxJQUNBaEMsSUhpU0k2RCxJQWpFMEIsTUFDMUIsSUFBSUMsRUFBZWpOLFNBQVNDLGNBQWMsY0FDMUNELFNBQVNDLGNBQWMsY0FBY21OLGlCQUFpQixTQUFTLEtBQzNEZixJQUNBWSxFQUFhL00sWUFBYyxNQUMzQmlMLElBQ0F5QixJQUNBQyxFQUFpQlksV0FFckJ6TixTQUFTQyxjQUFjLGdCQUFnQm1OLGlCQUFpQixTQUFTLEtBQzdEZixJQUNBWSxFQUFhL00sWUFBYyxRQUMzQnNMLElBQ0FvQixJQUNBQyxFQUFpQlksV0FFckJ6TixTQUFTQyxjQUFjLGVBQWVtTixpQkFBaUIsU0FBUyxLQUM1RGYsSUFDQVksRUFBYS9NLFlBQWMsT0FDM0J5TCxJQUNBaUIsSUFDQUMsRUFBaUJZLFlBNkNyQjhDLEdBQ0EzRCxJQUNBYyxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXMvLi9zcmMvZmFjdG9yaWVzLmpzIiwid2VicGFjazovL3RvZG8tbGlzLy4vc3JjL2Zvcm0tdmFsaWRhdG9ycy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpcy8uL3NyYy9zdG9yYWdlLmpzIiwid2VicGFjazovL3RvZG8tbGlzLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9jb25zdGFudHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXMvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3RvSW50ZWdlci9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpcy8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vcGFyc2VJU08vaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXMvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3RvRGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpcy8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vY29tcGFyZUFzYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpcy8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vYWRkRGF5cy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpcy8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vYWRkTW9udGhzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzLy4vc3JjL29iamVjdC1tZXRob2RzLmpzIiwid2VicGFjazovL3RvZG8tbGlzLy4vc3JjL3VpLmpzIiwid2VicGFjazovL3RvZG8tbGlzLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9hZGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXMvLi9zcmMvbW9kYWwtY29udHJvbHMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXMvLi9zcmMvc2NyaXB0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQcm9qZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb2xvcikge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMudGFza3MgPSBbXTtcbiAgICB9O1xuICAgIG5ld05hbWUobmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH07XG4gICAgbmV3Q29sb3IoY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIH1cbiAgICBhZGRUYXNrKHRhc2spIHtcbiAgICAgICAgdGhpcy50YXNrcy5wdXNoKHRhc2spO1xuICAgIH07XG4gICAgb3ZlcldyaXRlVGFza3ModGFza0xpc3QpIHtcbiAgICAgICAgdGhpcy50YXNrcyA9IHRhc2tMaXN0O1xuICAgIH07XG59O1xuXG5jbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBkYXRlLCBkb25lID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICAgICAgdGhpcy5kb25lID0gZG9uZTtcbiAgICB9O1xuICAgIG5ld05hbWUobmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH07XG4gICAgbmV3RGF0ZShkYXRlKSB7XG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XG4gICAgfTtcbiAgICB0b2dnbGVEb25lKCkge1xuICAgICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuZXhwb3J0IHtQcm9qZWN0LCBUYXNrfTsiLCJjb25zdCB2YWxpZGF0ZVByb2plY3RGb3JtID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpLnZhbHVlO1xuICAgIGxldCBwcm9qZWN0RXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbmFtZS1lcnJvclwiKTtcbiAgICBsZXQgbm9Qcm9qZWN0TmFtZUVycm9ycyA9IHRydWU7XG4gICAgaWYgKHByb2plY3ROYW1lID09PSBcIlwiKSB7XG4gICAgICAgIHByb2plY3RFcnJvci50ZXh0Q29udGVudCA9IFwiUGxlYXNlIGVudGVyIGEgbmFtZSBmb3IgdGhlIHByb2plY3QuXCJcbiAgICAgICAgbm9Qcm9qZWN0TmFtZUVycm9ycyA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2plY3RFcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIG5vUHJvamVjdE5hbWVFcnJvcnMgPSB0cnVlO1xuICAgIH07XG4gICAgaWYgKG5vUHJvamVjdE5hbWVFcnJvcnMpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59O1xuXG5jb25zdCB2YWxpZGF0ZVRhc2tGb3JtID0gKCkgPT4ge1xuICAgIGNvbnN0IHRhc2tOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrXCIpLnZhbHVlO1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0XCIpLnZhbHVlO1xuICAgIGxldCB0YXNrRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stZXJyb3JcIik7XG4gICAgbGV0IHByb2plY3RFcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdC1lcnJvclwiKTtcbiAgICBsZXQgbm9Qcm9qZWN0RXJyb3JzID0gdHJ1ZTtcbiAgICBsZXQgbm9UYXNrRXJyb3JzID0gdHJ1ZTtcbiAgICBpZiAodGFza05hbWUgPT09IFwiXCIpIHtcbiAgICAgICAgdGFza0Vycm9yLnRleHRDb250ZW50ID0gXCJQbGVhc2UgZW50ZXIgYSB0YXNrIG5hbWUuXCI7XG4gICAgICAgIG5vVGFza0Vycm9ycyA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tFcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIG5vVGFza0Vycm9ycyA9IHRydWU7XG4gICAgfTtcbiAgICBpZiAocHJvamVjdE5hbWUgPT09IFwiXCIgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0XCIpLmZpcnN0Q2hpbGQgPT09IG51bGwpIHtcbiAgICAgICAgcHJvamVjdEVycm9yLnRleHRDb250ZW50ID0gXCJQbGVhc2UgY3JlYXRlIGEgcHJvamVjdCBiZWZvcmUgYWRkaW5nIGEgdGFzay5cIjtcbiAgICAgICAgbm9Qcm9qZWN0RXJyb3JzID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvamVjdEVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgbm9Qcm9qZWN0RXJyb3JzID0gdHJ1ZTtcbiAgICB9O1xuICAgIGlmIChub1Byb2plY3RFcnJvcnMgJiYgbm9UYXNrRXJyb3JzKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufTtcblxuY29uc3QgY2xlYXJFcnJvck1lc3NhZ2VzID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay1lcnJvclwiKS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWVycm9yXCIpLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbmFtZS1lcnJvclwiKS50ZXh0Q29udGVudCA9IFwiXCI7XG59O1xuXG5leHBvcnQge1xuICAgIHZhbGlkYXRlUHJvamVjdEZvcm0sXG4gICAgdmFsaWRhdGVUYXNrRm9ybSxcbiAgICBjbGVhckVycm9yTWVzc2FnZXNcbn07IiwiY2xhc3MgU3RvcmFnZSB7XG4gICAgc3RhdGljIHNhdmVEYXRhKGRhdGEpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0TGlzdFwiLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgICB9O1xuICAgIHN0YXRpYyBnZXREYXRhKCkge1xuICAgICAgICBjb25zdCBwcm9qZWN0TGlzdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0TGlzdFwiKSk7XG4gICAgICAgIHJldHVybiBwcm9qZWN0TGlzdDtcbiAgICB9XG59O1xuXG5leHBvcnQge1N0b3JhZ2V9OyIsIi8qKlxuICogRGF5cyBpbiAxIHdlZWsuXG4gKlxuICogQG5hbWUgZGF5c0luV2Vla1xuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuZXhwb3J0IHZhciBkYXlzSW5XZWVrID0gNztcbi8qKlxuICogTWF4aW11bSBhbGxvd2VkIHRpbWUuXG4gKlxuICogQG5hbWUgbWF4VGltZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIG1heFRpbWUgPSBNYXRoLnBvdygxMCwgOCkgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuLyoqXG4gKiBNaWxsaXNlY29uZHMgaW4gMSBtaW51dGVcbiAqXG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbk1pbnV0ZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIG1pbGxpc2Vjb25kc0luTWludXRlID0gNjAwMDA7XG4vKipcbiAqIE1pbGxpc2Vjb25kcyBpbiAxIGhvdXJcbiAqXG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbkhvdXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtaWxsaXNlY29uZHNJbkhvdXIgPSAzNjAwMDAwO1xuLyoqXG4gKiBNaWxsaXNlY29uZHMgaW4gMSBzZWNvbmRcbiAqXG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJblNlY29uZFxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIG1pbGxpc2Vjb25kc0luU2Vjb25kID0gMTAwMDtcbi8qKlxuICogTWluaW11bSBhbGxvd2VkIHRpbWUuXG4gKlxuICogQG5hbWUgbWluVGltZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIG1pblRpbWUgPSAtbWF4VGltZTtcbi8qKlxuICogTWludXRlcyBpbiAxIGhvdXJcbiAqXG4gKiBAbmFtZSBtaW51dGVzSW5Ib3VyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWludXRlc0luSG91ciA9IDYwO1xuLyoqXG4gKiBNb250aHMgaW4gMSBxdWFydGVyXG4gKlxuICogQG5hbWUgbW9udGhzSW5RdWFydGVyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbW9udGhzSW5RdWFydGVyID0gMztcbi8qKlxuICogTW9udGhzIGluIDEgeWVhclxuICpcbiAqIEBuYW1lIG1vbnRoc0luWWVhclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIG1vbnRoc0luWWVhciA9IDEyO1xuLyoqXG4gKiBRdWFydGVycyBpbiAxIHllYXJcbiAqXG4gKiBAbmFtZSBxdWFydGVyc0luWWVhclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIHF1YXJ0ZXJzSW5ZZWFyID0gNDtcbi8qKlxuICogU2Vjb25kcyBpbiAxIGhvdXJcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5Ib3VyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgc2Vjb25kc0luSG91ciA9IDM2MDA7XG4vKipcbiAqIFNlY29uZHMgaW4gMSBtaW51dGVcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5NaW51dGVcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBzZWNvbmRzSW5NaW51dGUgPSA2MDsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1aXJlZEFyZ3MocmVxdWlyZWQsIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHJlcXVpcmVkICsgJyBhcmd1bWVudCcgKyAocmVxdWlyZWQgPiAxID8gJ3MnIDogJycpICsgJyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3MubGVuZ3RoICsgJyBwcmVzZW50Jyk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0ludGVnZXIoZGlydHlOdW1iZXIpIHtcbiAgaWYgKGRpcnR5TnVtYmVyID09PSBudWxsIHx8IGRpcnR5TnVtYmVyID09PSB0cnVlIHx8IGRpcnR5TnVtYmVyID09PSBmYWxzZSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICB2YXIgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTtcblxuICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgIHJldHVybiBudW1iZXI7XG4gIH1cblxuICByZXR1cm4gbnVtYmVyIDwgMCA/IE1hdGguY2VpbChudW1iZXIpIDogTWF0aC5mbG9vcihudW1iZXIpO1xufSIsImltcG9ydCB7IG1pbGxpc2Vjb25kc0luSG91ciwgbWlsbGlzZWNvbmRzSW5NaW51dGUgfSBmcm9tIFwiLi4vY29uc3RhbnRzL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgcGFyc2VJU09cbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgUGFyc2UgSVNPIHN0cmluZ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUGFyc2UgdGhlIGdpdmVuIHN0cmluZyBpbiBJU08gODYwMSBmb3JtYXQgYW5kIHJldHVybiBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEZ1bmN0aW9uIGFjY2VwdHMgY29tcGxldGUgSVNPIDg2MDEgZm9ybWF0cyBhcyB3ZWxsIGFzIHBhcnRpYWwgaW1wbGVtZW50YXRpb25zLlxuICogSVNPIDg2MDE6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDFcbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXNuJ3QgYSBzdHJpbmcsIHRoZSBmdW5jdGlvbiBjYW5ub3QgcGFyc2UgdGhlIHN0cmluZyBvclxuICogdGhlIHZhbHVlcyBhcmUgaW52YWxpZCwgaXQgcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiAtIFRoZSBwcmV2aW91cyBgcGFyc2VgIGltcGxlbWVudGF0aW9uIHdhcyByZW5hbWVkIHRvIGBwYXJzZUlTT2AuXG4gKlxuICogICBgYGBqYXZhc2NyaXB0XG4gKiAgIC8vIEJlZm9yZSB2Mi4wLjBcbiAqICAgcGFyc2UoJzIwMTYtMDEtMDEnKVxuICpcbiAqICAgLy8gdjIuMC4wIG9ud2FyZFxuICogICBwYXJzZUlTTygnMjAxNi0wMS0wMScpXG4gKiAgIGBgYFxuICpcbiAqIC0gYHBhcnNlSVNPYCBub3cgdmFsaWRhdGVzIHNlcGFyYXRlIGRhdGUgYW5kIHRpbWUgdmFsdWVzIGluIElTTy04NjAxIHN0cmluZ3NcbiAqICAgYW5kIHJldHVybnMgYEludmFsaWQgRGF0ZWAgaWYgdGhlIGRhdGUgaXMgaW52YWxpZC5cbiAqXG4gKiAgIGBgYGphdmFzY3JpcHRcbiAqICAgcGFyc2VJU08oJzIwMTgtMTMtMzInKVxuICogICAvLz0+IEludmFsaWQgRGF0ZVxuICogICBgYGBcbiAqXG4gKiAtIGBwYXJzZUlTT2Agbm93IGRvZXNuJ3QgZmFsbCBiYWNrIHRvIGBuZXcgRGF0ZWAgY29uc3RydWN0b3JcbiAqICAgaWYgaXQgZmFpbHMgdG8gcGFyc2UgYSBzdHJpbmcgYXJndW1lbnQuIEluc3RlYWQsIGl0IHJldHVybnMgYEludmFsaWQgRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHswfDF8Mn0gW29wdGlvbnMuYWRkaXRpb25hbERpZ2l0cz0yXSAtIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0c2AgbXVzdCBiZSAwLCAxIG9yIDJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCBzdHJpbmcgJzIwMTQtMDItMTFUMTE6MzA6MzAnIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBwYXJzZUlTTygnMjAxNC0wMi0xMVQxMTozMDozMCcpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHN0cmluZyAnKzAyMDE0MTAxJyB0byBkYXRlLFxuICogLy8gaWYgdGhlIGFkZGl0aW9uYWwgbnVtYmVyIG9mIGRpZ2l0cyBpbiB0aGUgZXh0ZW5kZWQgeWVhciBmb3JtYXQgaXMgMTpcbiAqIGNvbnN0IHJlc3VsdCA9IHBhcnNlSVNPKCcrMDIwMTQxMDEnLCB7IGFkZGl0aW9uYWxEaWdpdHM6IDEgfSlcbiAqIC8vPT4gRnJpIEFwciAxMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VJU08oYXJndW1lbnQsIGRpcnR5T3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307XG4gIHZhciBhZGRpdGlvbmFsRGlnaXRzID0gb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzID09IG51bGwgPyAyIDogdG9JbnRlZ2VyKG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0cyk7XG5cbiAgaWYgKGFkZGl0aW9uYWxEaWdpdHMgIT09IDIgJiYgYWRkaXRpb25hbERpZ2l0cyAhPT0gMSAmJiBhZGRpdGlvbmFsRGlnaXRzICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2FkZGl0aW9uYWxEaWdpdHMgbXVzdCBiZSAwLCAxIG9yIDInKTtcbiAgfVxuXG4gIGlmICghKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KSA9PT0gJ1tvYmplY3QgU3RyaW5nXScpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cblxuICB2YXIgZGF0ZVN0cmluZ3MgPSBzcGxpdERhdGVTdHJpbmcoYXJndW1lbnQpO1xuICB2YXIgZGF0ZTtcblxuICBpZiAoZGF0ZVN0cmluZ3MuZGF0ZSkge1xuICAgIHZhciBwYXJzZVllYXJSZXN1bHQgPSBwYXJzZVllYXIoZGF0ZVN0cmluZ3MuZGF0ZSwgYWRkaXRpb25hbERpZ2l0cyk7XG4gICAgZGF0ZSA9IHBhcnNlRGF0ZShwYXJzZVllYXJSZXN1bHQucmVzdERhdGVTdHJpbmcsIHBhcnNlWWVhclJlc3VsdC55ZWFyKTtcbiAgfVxuXG4gIGlmICghZGF0ZSB8fCBpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxuXG4gIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTtcbiAgdmFyIHRpbWUgPSAwO1xuICB2YXIgb2Zmc2V0O1xuXG4gIGlmIChkYXRlU3RyaW5ncy50aW1lKSB7XG4gICAgdGltZSA9IHBhcnNlVGltZShkYXRlU3RyaW5ncy50aW1lKTtcblxuICAgIGlmIChpc05hTih0aW1lKSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRhdGVTdHJpbmdzLnRpbWV6b25lKSB7XG4gICAgb2Zmc2V0ID0gcGFyc2VUaW1lem9uZShkYXRlU3RyaW5ncy50aW1lem9uZSk7XG5cbiAgICBpZiAoaXNOYU4ob2Zmc2V0KSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBkaXJ0eURhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lKTsgLy8ganMgcGFyc2VkIHN0cmluZyBhc3N1bWluZyBpdCdzIGluIFVUQyB0aW1lem9uZVxuICAgIC8vIGJ1dCB3ZSBuZWVkIGl0IHRvIGJlIHBhcnNlZCBpbiBvdXIgdGltZXpvbmVcbiAgICAvLyBzbyB3ZSB1c2UgdXRjIHZhbHVlcyB0byBidWlsZCBkYXRlIGluIG91ciB0aW1lem9uZS5cbiAgICAvLyBZZWFyIHZhbHVlcyBmcm9tIDAgdG8gOTkgbWFwIHRvIHRoZSB5ZWFycyAxOTAwIHRvIDE5OTlcbiAgICAvLyBzbyBzZXQgeWVhciBleHBsaWNpdGx5IHdpdGggc2V0RnVsbFllYXIuXG5cbiAgICB2YXIgcmVzdWx0ID0gbmV3IERhdGUoMCk7XG4gICAgcmVzdWx0LnNldEZ1bGxZZWFyKGRpcnR5RGF0ZS5nZXRVVENGdWxsWWVhcigpLCBkaXJ0eURhdGUuZ2V0VVRDTW9udGgoKSwgZGlydHlEYXRlLmdldFVUQ0RhdGUoKSk7XG4gICAgcmVzdWx0LnNldEhvdXJzKGRpcnR5RGF0ZS5nZXRVVENIb3VycygpLCBkaXJ0eURhdGUuZ2V0VVRDTWludXRlcygpLCBkaXJ0eURhdGUuZ2V0VVRDU2Vjb25kcygpLCBkaXJ0eURhdGUuZ2V0VVRDTWlsbGlzZWNvbmRzKCkpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wICsgdGltZSArIG9mZnNldCk7XG59XG52YXIgcGF0dGVybnMgPSB7XG4gIGRhdGVUaW1lRGVsaW1pdGVyOiAvW1QgXS8sXG4gIHRpbWVab25lRGVsaW1pdGVyOiAvW1ogXS9pLFxuICB0aW1lem9uZTogLyhbWistXS4qKSQvXG59O1xudmFyIGRhdGVSZWdleCA9IC9eLT8oPzooXFxkezN9KXwoXFxkezJ9KSg/Oi0/KFxcZHsyfSkpP3xXKFxcZHsyfSkoPzotPyhcXGR7MX0pKT98KSQvO1xudmFyIHRpbWVSZWdleCA9IC9eKFxcZHsyfSg/OlsuLF1cXGQqKT8pKD86Oj8oXFxkezJ9KD86Wy4sXVxcZCopPykpPyg/Ojo/KFxcZHsyfSg/OlsuLF1cXGQqKT8pKT8kLztcbnZhciB0aW1lem9uZVJlZ2V4ID0gL14oWystXSkoXFxkezJ9KSg/Ojo/KFxcZHsyfSkpPyQvO1xuXG5mdW5jdGlvbiBzcGxpdERhdGVTdHJpbmcoZGF0ZVN0cmluZykge1xuICB2YXIgZGF0ZVN0cmluZ3MgPSB7fTtcbiAgdmFyIGFycmF5ID0gZGF0ZVN0cmluZy5zcGxpdChwYXR0ZXJucy5kYXRlVGltZURlbGltaXRlcik7XG4gIHZhciB0aW1lU3RyaW5nOyAvLyBUaGUgcmVnZXggbWF0Y2ggc2hvdWxkIG9ubHkgcmV0dXJuIGF0IG1heGltdW0gdHdvIGFycmF5IGVsZW1lbnRzLlxuICAvLyBbZGF0ZV0sIFt0aW1lXSwgb3IgW2RhdGUsIHRpbWVdLlxuXG4gIGlmIChhcnJheS5sZW5ndGggPiAyKSB7XG4gICAgcmV0dXJuIGRhdGVTdHJpbmdzO1xuICB9XG5cbiAgaWYgKC86Ly50ZXN0KGFycmF5WzBdKSkge1xuICAgIHRpbWVTdHJpbmcgPSBhcnJheVswXTtcbiAgfSBlbHNlIHtcbiAgICBkYXRlU3RyaW5ncy5kYXRlID0gYXJyYXlbMF07XG4gICAgdGltZVN0cmluZyA9IGFycmF5WzFdO1xuXG4gICAgaWYgKHBhdHRlcm5zLnRpbWVab25lRGVsaW1pdGVyLnRlc3QoZGF0ZVN0cmluZ3MuZGF0ZSkpIHtcbiAgICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBkYXRlU3RyaW5nLnNwbGl0KHBhdHRlcm5zLnRpbWVab25lRGVsaW1pdGVyKVswXTtcbiAgICAgIHRpbWVTdHJpbmcgPSBkYXRlU3RyaW5nLnN1YnN0cihkYXRlU3RyaW5ncy5kYXRlLmxlbmd0aCwgZGF0ZVN0cmluZy5sZW5ndGgpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aW1lU3RyaW5nKSB7XG4gICAgdmFyIHRva2VuID0gcGF0dGVybnMudGltZXpvbmUuZXhlYyh0aW1lU3RyaW5nKTtcblxuICAgIGlmICh0b2tlbikge1xuICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmcucmVwbGFjZSh0b2tlblsxXSwgJycpO1xuICAgICAgZGF0ZVN0cmluZ3MudGltZXpvbmUgPSB0b2tlblsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRhdGVTdHJpbmdzO1xufVxuXG5mdW5jdGlvbiBwYXJzZVllYXIoZGF0ZVN0cmluZywgYWRkaXRpb25hbERpZ2l0cykge1xuICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCdeKD86KFxcXFxkezR9fFsrLV1cXFxcZHsnICsgKDQgKyBhZGRpdGlvbmFsRGlnaXRzKSArICd9KXwoXFxcXGR7Mn18WystXVxcXFxkeycgKyAoMiArIGFkZGl0aW9uYWxEaWdpdHMpICsgJ30pJCknKTtcbiAgdmFyIGNhcHR1cmVzID0gZGF0ZVN0cmluZy5tYXRjaChyZWdleCk7IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB5ZWFyXG5cbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIHtcbiAgICB5ZWFyOiBOYU4sXG4gICAgcmVzdERhdGVTdHJpbmc6ICcnXG4gIH07XG4gIHZhciB5ZWFyID0gY2FwdHVyZXNbMV0gPyBwYXJzZUludChjYXB0dXJlc1sxXSkgOiBudWxsO1xuICB2YXIgY2VudHVyeSA9IGNhcHR1cmVzWzJdID8gcGFyc2VJbnQoY2FwdHVyZXNbMl0pIDogbnVsbDsgLy8gZWl0aGVyIHllYXIgb3IgY2VudHVyeSBpcyBudWxsLCBub3QgYm90aFxuXG4gIHJldHVybiB7XG4gICAgeWVhcjogY2VudHVyeSA9PT0gbnVsbCA/IHllYXIgOiBjZW50dXJ5ICogMTAwLFxuICAgIHJlc3REYXRlU3RyaW5nOiBkYXRlU3RyaW5nLnNsaWNlKChjYXB0dXJlc1sxXSB8fCBjYXB0dXJlc1syXSkubGVuZ3RoKVxuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZURhdGUoZGF0ZVN0cmluZywgeWVhcikge1xuICAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgeWVhclxuICBpZiAoeWVhciA9PT0gbnVsbCkgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIHZhciBjYXB0dXJlcyA9IGRhdGVTdHJpbmcubWF0Y2goZGF0ZVJlZ2V4KTsgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHN0cmluZ1xuXG4gIGlmICghY2FwdHVyZXMpIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB2YXIgaXNXZWVrRGF0ZSA9ICEhY2FwdHVyZXNbNF07XG4gIHZhciBkYXlPZlllYXIgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzFdKTtcbiAgdmFyIG1vbnRoID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1syXSkgLSAxO1xuICB2YXIgZGF5ID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1szXSk7XG4gIHZhciB3ZWVrID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1s0XSk7XG4gIHZhciBkYXlPZldlZWsgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzVdKSAtIDE7XG5cbiAgaWYgKGlzV2Vla0RhdGUpIHtcbiAgICBpZiAoIXZhbGlkYXRlV2Vla0RhdGUoeWVhciwgd2VlaywgZGF5T2ZXZWVrKSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRheU9mSVNPV2Vla1llYXIoeWVhciwgd2VlaywgZGF5T2ZXZWVrKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApO1xuXG4gICAgaWYgKCF2YWxpZGF0ZURhdGUoeWVhciwgbW9udGgsIGRheSkgfHwgIXZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSh5ZWFyLCBkYXlPZlllYXIpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG5cbiAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHllYXIsIG1vbnRoLCBNYXRoLm1heChkYXlPZlllYXIsIGRheSkpO1xuICAgIHJldHVybiBkYXRlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlRGF0ZVVuaXQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID8gcGFyc2VJbnQodmFsdWUpIDogMTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUaW1lKHRpbWVTdHJpbmcpIHtcbiAgdmFyIGNhcHR1cmVzID0gdGltZVN0cmluZy5tYXRjaCh0aW1lUmVnZXgpO1xuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4gTmFOOyAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgdGltZVxuXG4gIHZhciBob3VycyA9IHBhcnNlVGltZVVuaXQoY2FwdHVyZXNbMV0pO1xuICB2YXIgbWludXRlcyA9IHBhcnNlVGltZVVuaXQoY2FwdHVyZXNbMl0pO1xuICB2YXIgc2Vjb25kcyA9IHBhcnNlVGltZVVuaXQoY2FwdHVyZXNbM10pO1xuXG4gIGlmICghdmFsaWRhdGVUaW1lKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICByZXR1cm4gaG91cnMgKiBtaWxsaXNlY29uZHNJbkhvdXIgKyBtaW51dGVzICogbWlsbGlzZWNvbmRzSW5NaW51dGUgKyBzZWNvbmRzICogMTAwMDtcbn1cblxuZnVuY3Rpb24gcGFyc2VUaW1lVW5pdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgJiYgcGFyc2VGbG9hdCh2YWx1ZS5yZXBsYWNlKCcsJywgJy4nKSkgfHwgMDtcbn1cblxuZnVuY3Rpb24gcGFyc2VUaW1lem9uZSh0aW1lem9uZVN0cmluZykge1xuICBpZiAodGltZXpvbmVTdHJpbmcgPT09ICdaJykgcmV0dXJuIDA7XG4gIHZhciBjYXB0dXJlcyA9IHRpbWV6b25lU3RyaW5nLm1hdGNoKHRpbWV6b25lUmVnZXgpO1xuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4gMDtcbiAgdmFyIHNpZ24gPSBjYXB0dXJlc1sxXSA9PT0gJysnID8gLTEgOiAxO1xuICB2YXIgaG91cnMgPSBwYXJzZUludChjYXB0dXJlc1syXSk7XG4gIHZhciBtaW51dGVzID0gY2FwdHVyZXNbM10gJiYgcGFyc2VJbnQoY2FwdHVyZXNbM10pIHx8IDA7XG5cbiAgaWYgKCF2YWxpZGF0ZVRpbWV6b25lKGhvdXJzLCBtaW51dGVzKSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICByZXR1cm4gc2lnbiAqIChob3VycyAqIG1pbGxpc2Vjb25kc0luSG91ciArIG1pbnV0ZXMgKiBtaWxsaXNlY29uZHNJbk1pbnV0ZSk7XG59XG5cbmZ1bmN0aW9uIGRheU9mSVNPV2Vla1llYXIoaXNvV2Vla1llYXIsIHdlZWssIGRheSkge1xuICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApO1xuICBkYXRlLnNldFVUQ0Z1bGxZZWFyKGlzb1dlZWtZZWFyLCAwLCA0KTtcbiAgdmFyIGZvdXJ0aE9mSmFudWFyeURheSA9IGRhdGUuZ2V0VVRDRGF5KCkgfHwgNztcbiAgdmFyIGRpZmYgPSAod2VlayAtIDEpICogNyArIGRheSArIDEgLSBmb3VydGhPZkphbnVhcnlEYXk7XG4gIGRhdGUuc2V0VVRDRGF0ZShkYXRlLmdldFVUQ0RhdGUoKSArIGRpZmYpO1xuICByZXR1cm4gZGF0ZTtcbn0gLy8gVmFsaWRhdGlvbiBmdW5jdGlvbnNcbi8vIEZlYnJ1YXJ5IGlzIG51bGwgdG8gaGFuZGxlIHRoZSBsZWFwIHllYXIgKHVzaW5nIHx8KVxuXG5cbnZhciBkYXlzSW5Nb250aHMgPSBbMzEsIG51bGwsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTtcblxuZnVuY3Rpb24gaXNMZWFwWWVhckluZGV4KHllYXIpIHtcbiAgcmV0dXJuIHllYXIgJSA0MDAgPT09IDAgfHwgeWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHllYXIsIG1vbnRoLCBkYXRlKSB7XG4gIHJldHVybiBtb250aCA+PSAwICYmIG1vbnRoIDw9IDExICYmIGRhdGUgPj0gMSAmJiBkYXRlIDw9IChkYXlzSW5Nb250aHNbbW9udGhdIHx8IChpc0xlYXBZZWFySW5kZXgoeWVhcikgPyAyOSA6IDI4KSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSh5ZWFyLCBkYXlPZlllYXIpIHtcbiAgcmV0dXJuIGRheU9mWWVhciA+PSAxICYmIGRheU9mWWVhciA8PSAoaXNMZWFwWWVhckluZGV4KHllYXIpID8gMzY2IDogMzY1KTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVXZWVrRGF0ZShfeWVhciwgd2VlaywgZGF5KSB7XG4gIHJldHVybiB3ZWVrID49IDEgJiYgd2VlayA8PSA1MyAmJiBkYXkgPj0gMCAmJiBkYXkgPD0gNjtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVUaW1lKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gIGlmIChob3VycyA9PT0gMjQpIHtcbiAgICByZXR1cm4gbWludXRlcyA9PT0gMCAmJiBzZWNvbmRzID09PSAwO1xuICB9XG5cbiAgcmV0dXJuIHNlY29uZHMgPj0gMCAmJiBzZWNvbmRzIDwgNjAgJiYgbWludXRlcyA+PSAwICYmIG1pbnV0ZXMgPCA2MCAmJiBob3VycyA+PSAwICYmIGhvdXJzIDwgMjU7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVGltZXpvbmUoX2hvdXJzLCBtaW51dGVzKSB7XG4gIHJldHVybiBtaW51dGVzID49IDAgJiYgbWludXRlcyA8PSA1OTtcbn0iLCJpbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTsgLy8gQ2xvbmUgdGhlIGRhdGVcblxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBhcmd1bWVudCA9PT0gJ29iamVjdCcgJiYgYXJnU3RyID09PSAnW29iamVjdCBEYXRlXScpIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgTnVtYmVyXScpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGlmICgodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IFN0cmluZ10nKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJTdGFydGluZyB3aXRoIHYyLjAuMC1iZXRhLjEgZGF0ZS1mbnMgZG9lc24ndCBhY2NlcHQgc3RyaW5ncyBhcyBkYXRlIGFyZ3VtZW50cy4gUGxlYXNlIHVzZSBgcGFyc2VJU09gIHRvIHBhcnNlIHN0cmluZ3MuIFNlZTogaHR0cHM6Ly9naXQuaW8vZmp1bGVcIik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5cbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGNvbXBhcmVBc2NcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29tcGFyZSB0aGUgdHdvIGRhdGVzIGFuZCByZXR1cm4gLTEsIDAgb3IgMS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbXBhcmUgdGhlIHR3byBkYXRlcyBhbmQgcmV0dXJuIDEgaWYgdGhlIGZpcnN0IGRhdGUgaXMgYWZ0ZXIgdGhlIHNlY29uZCxcbiAqIC0xIGlmIHRoZSBmaXJzdCBkYXRlIGlzIGJlZm9yZSB0aGUgc2Vjb25kIG9yIDAgaWYgZGF0ZXMgYXJlIGVxdWFsLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjb21wYXJlXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY29tcGFyZVxuICogQHJldHVybnMge051bWJlcn0gdGhlIHJlc3VsdCBvZiB0aGUgY29tcGFyaXNvblxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb21wYXJlIDExIEZlYnJ1YXJ5IDE5ODcgYW5kIDEwIEp1bHkgMTk4OTpcbiAqIGNvbnN0IHJlc3VsdCA9IGNvbXBhcmVBc2MobmV3IERhdGUoMTk4NywgMSwgMTEpLCBuZXcgRGF0ZSgxOTg5LCA2LCAxMCkpXG4gKiAvLz0+IC0xXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFNvcnQgdGhlIGFycmF5IG9mIGRhdGVzOlxuICogY29uc3QgcmVzdWx0ID0gW1xuICogICBuZXcgRGF0ZSgxOTk1LCA2LCAyKSxcbiAqICAgbmV3IERhdGUoMTk4NywgMSwgMTEpLFxuICogICBuZXcgRGF0ZSgxOTg5LCA2LCAxMClcbiAqIF0uc29ydChjb21wYXJlQXNjKVxuICogLy89PiBbXG4gKiAvLyAgIFdlZCBGZWIgMTEgMTk4NyAwMDowMDowMCxcbiAqIC8vICAgTW9uIEp1bCAxMCAxOTg5IDAwOjAwOjAwLFxuICogLy8gICBTdW4gSnVsIDAyIDE5OTUgMDA6MDA6MDBcbiAqIC8vIF1cbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb21wYXJlQXNjKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnQgPSB0b0RhdGUoZGlydHlEYXRlTGVmdCk7XG4gIHZhciBkYXRlUmlnaHQgPSB0b0RhdGUoZGlydHlEYXRlUmlnaHQpO1xuICB2YXIgZGlmZiA9IGRhdGVMZWZ0LmdldFRpbWUoKSAtIGRhdGVSaWdodC5nZXRUaW1lKCk7XG5cbiAgaWYgKGRpZmYgPCAwKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2UgaWYgKGRpZmYgPiAwKSB7XG4gICAgcmV0dXJuIDE7IC8vIFJldHVybiAwIGlmIGRpZmYgaXMgMDsgcmV0dXJuIE5hTiBpZiBkaWZmIGlzIE5hTlxuICB9IGVsc2Uge1xuICAgIHJldHVybiBkaWZmO1xuICB9XG59IiwiaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgYWRkRGF5c1xuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBZGQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZGF5cyB0byB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFkZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBkYXlzIHRvIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGJlIGNoYW5nZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIGRheXMgdG8gYmUgYWRkZWQuIFBvc2l0aXZlIGRlY2ltYWxzIHdpbGwgYmUgcm91bmRlZCB1c2luZyBgTWF0aC5mbG9vcmAsIGRlY2ltYWxzIGxlc3MgdGhhbiB6ZXJvIHdpbGwgYmUgcm91bmRlZCB1c2luZyBgTWF0aC5jZWlsYC5cbiAqIEByZXR1cm5zIHtEYXRlfSAtIHRoZSBuZXcgZGF0ZSB3aXRoIHRoZSBkYXlzIGFkZGVkXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IC0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQWRkIDEwIGRheXMgdG8gMSBTZXB0ZW1iZXIgMjAxNDpcbiAqIGNvbnN0IHJlc3VsdCA9IGFkZERheXMobmV3IERhdGUoMjAxNCwgOCwgMSksIDEwKVxuICogLy89PiBUaHUgU2VwIDExIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhZGREYXlzKGRpcnR5RGF0ZSwgZGlydHlBbW91bnQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBhbW91bnQgPSB0b0ludGVnZXIoZGlydHlBbW91bnQpO1xuXG4gIGlmIChpc05hTihhbW91bnQpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cblxuICBpZiAoIWFtb3VudCkge1xuICAgIC8vIElmIDAgZGF5cywgbm8tb3AgdG8gYXZvaWQgY2hhbmdpbmcgdGltZXMgaW4gdGhlIGhvdXIgYmVmb3JlIGVuZCBvZiBEU1RcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxuXG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIGFtb3VudCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGFkZE1vbnRoc1xuICogQGNhdGVnb3J5IE1vbnRoIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFkZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBtb250aHMgdG8gdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBZGQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgbW9udGhzIHRvIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGJlIGNoYW5nZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIG1vbnRocyB0byBiZSBhZGRlZC4gUG9zaXRpdmUgZGVjaW1hbHMgd2lsbCBiZSByb3VuZGVkIHVzaW5nIGBNYXRoLmZsb29yYCwgZGVjaW1hbHMgbGVzcyB0aGFuIHplcm8gd2lsbCBiZSByb3VuZGVkIHVzaW5nIGBNYXRoLmNlaWxgLlxuICogQHJldHVybnMge0RhdGV9IHRoZSBuZXcgZGF0ZSB3aXRoIHRoZSBtb250aHMgYWRkZWRcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQWRkIDUgbW9udGhzIHRvIDEgU2VwdGVtYmVyIDIwMTQ6XG4gKiBjb25zdCByZXN1bHQgPSBhZGRNb250aHMobmV3IERhdGUoMjAxNCwgOCwgMSksIDUpXG4gKiAvLz0+IFN1biBGZWIgMDEgMjAxNSAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFkZE1vbnRocyhkaXJ0eURhdGUsIGRpcnR5QW1vdW50KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgYW1vdW50ID0gdG9JbnRlZ2VyKGRpcnR5QW1vdW50KTtcblxuICBpZiAoaXNOYU4oYW1vdW50KSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG5cbiAgaWYgKCFhbW91bnQpIHtcbiAgICAvLyBJZiAwIG1vbnRocywgbm8tb3AgdG8gYXZvaWQgY2hhbmdpbmcgdGltZXMgaW4gdGhlIGhvdXIgYmVmb3JlIGVuZCBvZiBEU1RcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxuXG4gIHZhciBkYXlPZk1vbnRoID0gZGF0ZS5nZXREYXRlKCk7IC8vIFRoZSBKUyBEYXRlIG9iamVjdCBzdXBwb3J0cyBkYXRlIG1hdGggYnkgYWNjZXB0aW5nIG91dC1vZi1ib3VuZHMgdmFsdWVzIGZvclxuICAvLyBtb250aCwgZGF5LCBldGMuIEZvciBleGFtcGxlLCBuZXcgRGF0ZSgyMDIwLCAwLCAwKSByZXR1cm5zIDMxIERlYyAyMDE5IGFuZFxuICAvLyBuZXcgRGF0ZSgyMDIwLCAxMywgMSkgcmV0dXJucyAxIEZlYiAyMDIxLiAgVGhpcyBpcyAqYWxtb3N0KiB0aGUgYmVoYXZpb3Igd2VcbiAgLy8gd2FudCBleGNlcHQgdGhhdCBkYXRlcyB3aWxsIHdyYXAgYXJvdW5kIHRoZSBlbmQgb2YgYSBtb250aCwgbWVhbmluZyB0aGF0XG4gIC8vIG5ldyBEYXRlKDIwMjAsIDEzLCAzMSkgd2lsbCByZXR1cm4gMyBNYXIgMjAyMSBub3QgMjggRmViIDIwMjEgYXMgZGVzaXJlZC4gU29cbiAgLy8gd2UnbGwgZGVmYXVsdCB0byB0aGUgZW5kIG9mIHRoZSBkZXNpcmVkIG1vbnRoIGJ5IGFkZGluZyAxIHRvIHRoZSBkZXNpcmVkXG4gIC8vIG1vbnRoIGFuZCB1c2luZyBhIGRhdGUgb2YgMCB0byBiYWNrIHVwIG9uZSBkYXkgdG8gdGhlIGVuZCBvZiB0aGUgZGVzaXJlZFxuICAvLyBtb250aC5cblxuICB2YXIgZW5kT2ZEZXNpcmVkTW9udGggPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XG4gIGVuZE9mRGVzaXJlZE1vbnRoLnNldE1vbnRoKGRhdGUuZ2V0TW9udGgoKSArIGFtb3VudCArIDEsIDApO1xuICB2YXIgZGF5c0luTW9udGggPSBlbmRPZkRlc2lyZWRNb250aC5nZXREYXRlKCk7XG5cbiAgaWYgKGRheU9mTW9udGggPj0gZGF5c0luTW9udGgpIHtcbiAgICAvLyBJZiB3ZSdyZSBhbHJlYWR5IGF0IHRoZSBlbmQgb2YgdGhlIG1vbnRoLCB0aGVuIHRoaXMgaXMgdGhlIGNvcnJlY3QgZGF0ZVxuICAgIC8vIGFuZCB3ZSdyZSBkb25lLlxuICAgIHJldHVybiBlbmRPZkRlc2lyZWRNb250aDtcbiAgfSBlbHNlIHtcbiAgICAvLyBPdGhlcndpc2UsIHdlIG5vdyBrbm93IHRoYXQgc2V0dGluZyB0aGUgb3JpZ2luYWwgZGF5LW9mLW1vbnRoIHZhbHVlIHdvbid0XG4gICAgLy8gY2F1c2UgYW4gb3ZlcmZsb3csIHNvIHNldCB0aGUgZGVzaXJlZCBkYXktb2YtbW9udGguIE5vdGUgdGhhdCB3ZSBjYW4ndFxuICAgIC8vIGp1c3Qgc2V0IHRoZSBkYXRlIG9mIGBlbmRPZkRlc2lyZWRNb250aGAgYmVjYXVzZSB0aGF0IG9iamVjdCBtYXkgaGF2ZSBoYWRcbiAgICAvLyBpdHMgdGltZSBjaGFuZ2VkIGluIHRoZSB1bnVzdWFsIGNhc2Ugd2hlcmUgd2hlcmUgYSBEU1QgdHJhbnNpdGlvbiB3YXMgb25cbiAgICAvLyB0aGUgbGFzdCBkYXkgb2YgdGhlIG1vbnRoIGFuZCBpdHMgbG9jYWwgdGltZSB3YXMgaW4gdGhlIGhvdXIgc2tpcHBlZCBvclxuICAgIC8vIHJlcGVhdGVkIG5leHQgdG8gYSBEU1QgdHJhbnNpdGlvbi4gIFNvIHdlIHVzZSBgZGF0ZWAgaW5zdGVhZCB3aGljaCBpc1xuICAgIC8vIGd1YXJhbnRlZWQgdG8gc3RpbGwgaGF2ZSB0aGUgb3JpZ2luYWwgdGltZS5cbiAgICBkYXRlLnNldEZ1bGxZZWFyKGVuZE9mRGVzaXJlZE1vbnRoLmdldEZ1bGxZZWFyKCksIGVuZE9mRGVzaXJlZE1vbnRoLmdldE1vbnRoKCksIGRheU9mTW9udGgpO1xuICAgIHJldHVybiBkYXRlO1xuICB9XG59IiwiaW1wb3J0IHtTdG9yYWdlfSBmcm9tIFwiLi9zdG9yYWdlLmpzXCI7XG5pbXBvcnQge1Rhc2ssIFByb2plY3R9IGZyb20gXCIuL2ZhY3Rvcmllcy5qc1wiO1xuXG5jb25zdCByZWNvbnN0cnVjdGVkUHJvamVjdExpc3QgPSAoKSA9PiB7XG4gICAgbGV0IHJlY29uc3RydWN0ZWQgPSBbXTtcbiAgICBsZXQgZnJvbVN0b3JhZ2UgPSBTdG9yYWdlLmdldERhdGEoKTtcbiAgICBmcm9tU3RvcmFnZS5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICAgIGxldCBuZXdQcm9qZWN0ID0gbmV3IFByb2plY3QocHJvamVjdC5uYW1lLCBwcm9qZWN0LmNvbG9yKTtcbiAgICAgICAgbGV0IHRhc2tMaXN0ID0gcHJvamVjdC50YXNrcztcbiAgICAgICAgdGFza0xpc3QuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgICAgICAgbmV3UHJvamVjdC5hZGRUYXNrKG5ldyBUYXNrKHRhc2submFtZSwgdGFzay5kYXRlLCB0YXNrLmRvbmUpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlY29uc3RydWN0ZWQucHVzaChuZXdQcm9qZWN0KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVjb25zdHJ1Y3RlZDtcbn07XG5cbmV4cG9ydCB7cmVjb25zdHJ1Y3RlZFByb2plY3RMaXN0fTsiLCJpbXBvcnQge1N0b3JhZ2V9IGZyb20gXCIuL3N0b3JhZ2UuanNcIjtcbmltcG9ydCB7YWRkLCBjb21wYXJlQXNjLCBwYXJzZUlTT30gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQge3JlY29uc3RydWN0ZWRQcm9qZWN0TGlzdH0gZnJvbSBcIi4vb2JqZWN0LW1ldGhvZHMuanNcIjtcbmltcG9ydCB7dGFza0VkaXRCdXR0b25MaXN0ZW5lcnN9IGZyb20gXCIuL21vZGFsLWNvbnRyb2xzLmpzXCI7XG5cbmNvbnN0IGFkZFByb2plY3RUb1VpID0gKG9iaikgPT4ge1xuICAgIGxldCBwYXJlbnRMaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBwYXJlbnRMaS5kYXRhc2V0LnByb2plY3QgPSBvYmoubmFtZTtcbiAgICBsZXQgbmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIGxldCB0YXNrQ291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIGxldCBjb2xvckNpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza0NvdW50ZXIudGV4dENvbnRlbnQgPSBcIigwKVwiO1xuICAgIG5hbWVDb250YWluZXIudGV4dENvbnRlbnQgPSBvYmoubmFtZTtcbiAgICBjb2xvckNpcmNsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvYmouY29sb3I7XG4gICAgcGFyZW50TGkuYXBwZW5kQ2hpbGQoY29sb3JDaXJjbGUpO1xuICAgIHBhcmVudExpLmFwcGVuZENoaWxkKG5hbWVDb250YWluZXIpO1xuICAgIHBhcmVudExpLmFwcGVuZENoaWxkKHRhc2tDb3VudGVyKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtY29udGFpbmVyIHVsXCIpLmFwcGVuZENoaWxkKHBhcmVudExpKTtcbn07XG5cbmNvbnN0IGFkZEFsbFByb2plY3RzVG9VaSA9ICgpID0+IHtcbiAgICBpZiAoU3RvcmFnZS5nZXREYXRhKCkgIT09IG51bGwpIHtcbiAgICAgICAgbGV0IHByb2plY3RBcnJheSA9IFN0b3JhZ2UuZ2V0RGF0YSgpO1xuICAgICAgICBwcm9qZWN0QXJyYXkuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgICAgICAgYWRkUHJvamVjdFRvVWkocHJvamVjdCk7XG4gICAgICAgIH0pO1xuICAgIH07XG59O1xuXG5jb25zdCBhZGRUYXNrdG9VaSA9IChvYmosIGNvbG9yLCBwcm9qZWN0SW5kZXgsIHRhc2tJbmRleCkgPT4ge1xuICAgIGxldCBwYXJlbnRMaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBwYXJlbnRMaS5kYXRhc2V0LnByb2plY3RJbmRleCA9IHByb2plY3RJbmRleDtcbiAgICBwYXJlbnRMaS5kYXRhc2V0LnRhc2tJbmRleCA9IHRhc2tJbmRleDtcbiAgICBsZXQgY29sb3JCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29sb3JCbG9jay5jbGFzc0xpc3QuYWRkKFwiY29sb3ItYmxvY2tcIik7XG4gICAgY29sb3JCbG9jay5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcbiAgICBsZXQgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGFzay1jb250YWluZXJcIik7XG4gICAgbGV0IHRhc2tBbmRDaGVja2JveERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza0FuZENoZWNrYm94RGl2LmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWFuZC1jaGVja2JveFwiKTtcbiAgICBsZXQgY2hlY2tib3hEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNoZWNrYm94RGl2LmNsYXNzTGlzdC5hZGQoXCJjaGVja2JveFwiKTtcbiAgICBpZiAob2JqLmRvbmUgPT09IHRydWUpIHtcbiAgICAgICAgY2hlY2tib3hEaXYuY2xhc3NMaXN0LmFkZChcImNoZWNrZWRcIik7XG4gICAgICAgIGxldCBjaGVja2JveEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIGNoZWNrYm94SW1nLnNyYyA9IFwiLi9pbWcvY2hlY2sucG5nXCI7XG4gICAgICAgIGNoZWNrYm94RGl2LmFwcGVuZENoaWxkKGNoZWNrYm94SW1nKTtcbiAgICB9O1xuICAgIGxldCB0YXNrTmFtZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza05hbWVEaXYuY2xhc3NMaXN0LmFkZChcInRhc2stbmFtZVwiKTtcbiAgICB0YXNrTmFtZURpdi50ZXh0Q29udGVudCA9IG9iai5uYW1lO1xuICAgIGxldCBkYXRlQW5kRWRpdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGF0ZUFuZEVkaXREaXYuY2xhc3NMaXN0LmFkZChcImRhdGUtYW5kLWVkaXRcIik7XG4gICAgbGV0IGRhdGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGF0ZVwiKTtcbiAgICBkYXRlRGl2LmNsYXNzTGlzdC5hZGQoXCJkYXRlXCIpO1xuICAgIGlmIChvYmouZGF0ZSA9PT0gXCJcIikge1xuICAgICAgICBkYXRlRGl2LnRleHRDb250ZW50ID0gXCJObyBkdWUgZGF0ZVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGVEaXYudGV4dENvbnRlbnQgPSBvYmouZGF0ZTtcbiAgICB9O1xuICAgIGxldCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgZWRpdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidGFzay1lZGl0LWJ1dHRvblwiKVxuICAgIGxldCBlZGl0SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBlZGl0SW1nLnNyYyA9IFwiLi9pbWcvY3JlZGl0LWNhcmQtZWRpdC5wbmdcIjtcbiAgICBsZXQgdHJhc2hCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBsZXQgdHJhc2hJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIHRyYXNoSW1nLnNyYyA9IFwiLi9pbWcvZGVsZXRlLnBuZ1wiO1xuICAgIHBhcmVudExpLmFwcGVuZENoaWxkKGNvbG9yQmxvY2spO1xuICAgIHBhcmVudExpLmFwcGVuZENoaWxkKHRhc2tDb250YWluZXIpO1xuICAgIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0FuZENoZWNrYm94RGl2KTtcbiAgICB0YXNrQW5kQ2hlY2tib3hEaXYuYXBwZW5kQ2hpbGQoY2hlY2tib3hEaXYpO1xuICAgIHRhc2tBbmRDaGVja2JveERpdi5hcHBlbmRDaGlsZCh0YXNrTmFtZURpdik7XG4gICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZChkYXRlQW5kRWRpdERpdik7XG4gICAgZGF0ZUFuZEVkaXREaXYuYXBwZW5kQ2hpbGQoZGF0ZURpdik7XG4gICAgZWRpdEJ1dHRvbi5hcHBlbmRDaGlsZChlZGl0SW1nKTtcbiAgICB0cmFzaEJ1dHRvbi5hcHBlbmRDaGlsZCh0cmFzaEltZyk7XG4gICAgZGF0ZUFuZEVkaXREaXYuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbik7XG4gICAgZGF0ZUFuZEVkaXREaXYuYXBwZW5kQ2hpbGQodHJhc2hCdXR0b24pO1xuICAgIGlmIChvYmouZG9uZSkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvdC1jb250ZW50LWJsb2NrIHVsXCIpLmFwcGVuZChwYXJlbnRMaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ib3QtY29udGVudC1ibG9jayB1bFwiKS5wcmVwZW5kKHBhcmVudExpKTtcblxuICAgIH07XG59O1xuXG5jb25zdCBhZGRBbGxUYXNrc1RvVWkgPSAoKSA9PiB7XG4gICAgaWYgKFN0b3JhZ2UuZ2V0RGF0YSgpICE9PSBudWxsKSB7XG4gICAgICAgIGxldCBwcm9qZWN0QXJyYXkgPSBTdG9yYWdlLmdldERhdGEoKTtcbiAgICAgICAgbGV0IHByb2plY3RJbmRleCA9IDA7XG4gICAgICAgIHByb2plY3RBcnJheS5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICAgICAgICBsZXQgdGFza0NvbG9yID0gcHJvamVjdC5jb2xvcjtcbiAgICAgICAgICAgIGxldCB0YXNrSW5kZXggPSAwO1xuICAgICAgICAgICAgcHJvamVjdC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkVGFza3RvVWkodGFzaywgdGFza0NvbG9yLCBwcm9qZWN0SW5kZXgsIHRhc2tJbmRleCk7XG4gICAgICAgICAgICAgICAgdGFza0luZGV4Kys7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHByb2plY3RJbmRleCsrO1xuICAgICAgICB9KTtcbiAgICB9O1xufTtcblxuY29uc3QgYWRkVGFza3NGcm9tUHJvamVjdCA9IChwcm9qZWN0TmFtZSkgPT4ge1xuICAgIGlmIChTdG9yYWdlLmdldERhdGEoKSAhPT0gbnVsbCkge1xuICAgICAgICBsZXQgcHJvamVjdEFycmF5ID0gU3RvcmFnZS5nZXREYXRhKCk7XG4gICAgICAgIGxldCBwcm9qZWN0SW5kZXggPSAwO1xuICAgICAgICBwcm9qZWN0QXJyYXkuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHRhc2tJbmRleCA9IDA7XG4gICAgICAgICAgICBpZiAocHJvamVjdC5uYW1lID09PSBwcm9qZWN0TmFtZSkge1xuICAgICAgICAgICAgICAgIGxldCB0YXNrQ29sb3IgPSBwcm9qZWN0LmNvbG9yO1xuICAgICAgICAgICAgICAgIHByb2plY3QudGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhZGRUYXNrdG9VaSh0YXNrLCB0YXNrQ29sb3IsIHByb2plY3RJbmRleCwgdGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0luZGV4Kys7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcHJvamVjdEluZGV4Kys7XG4gICAgICAgIH0pO1xuICAgIH07XG59O1xuXG5jb25zdCBhZGRUb2RheXNUYXNrcyA9ICgpID0+IHtcbiAgICBsZXQgdG9kYXkgPSBwYXJzZUlTTyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdKTtcbiAgICBsZXQgcHJvamVjdEFycmF5ID0gU3RvcmFnZS5nZXREYXRhKCk7XG4gICAgbGV0IHByb2plY3RJbmRleCA9IDA7XG4gICAgcHJvamVjdEFycmF5LmZvckVhY2goKHByb2plY3QpID0+IHtcbiAgICAgICAgbGV0IHRhc2tDb2xvciA9IHByb2plY3QuY29sb3I7XG4gICAgICAgIGxldCB0YXNrSW5kZXggPSAwO1xuICAgICAgICBwcm9qZWN0LnRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgICAgIGlmIChjb21wYXJlQXNjKHBhcnNlSVNPKHRhc2suZGF0ZSksIHRvZGF5KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGFkZFRhc2t0b1VpKHRhc2ssIHRhc2tDb2xvciwgcHJvamVjdEluZGV4LCB0YXNrSW5kZXgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRhc2tJbmRleCsrO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJvamVjdEluZGV4Kys7XG4gICAgfSk7XG59O1xuXG5jb25zdCBhZGRXZWVrc1Rhc2tzID0gKCkgPT4ge1xuICAgIGxldCB0b2RheSA9IHBhcnNlSVNPKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0pO1xuICAgIGxldCB3ZWVrRnJvbU5vdyA9IGFkZCh0b2RheSwge1xuICAgICAgICBkYXlzOiA3XG4gICAgfSk7XG4gICAgbGV0IHByb2plY3RBcnJheSA9IFN0b3JhZ2UuZ2V0RGF0YSgpO1xuICAgIGxldCBwcm9qZWN0SW5kZXggPSAwO1xuICAgIHByb2plY3RBcnJheS5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICAgIGxldCB0YXNrQ29sb3IgPSBwcm9qZWN0LmNvbG9yO1xuICAgICAgICBsZXQgdGFza0luZGV4ID0gMDtcbiAgICAgICAgcHJvamVjdC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29tcGFyZUFzYyhwYXJzZUlTTyh0YXNrLmRhdGUpLCB3ZWVrRnJvbU5vdykgPT09IC0xICYmIGNvbXBhcmVBc2MocGFyc2VJU08odGFzay5kYXRlKSwgdG9kYXkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGFkZFRhc2t0b1VpKHRhc2ssIHRhc2tDb2xvciwgcHJvamVjdEluZGV4LCB0YXNrSW5kZXgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRhc2tJbmRleCsrO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJvamVjdEluZGV4Kys7XG4gICAgfSk7XG59O1xuXG5jb25zdCBjbGVhclRhc2tzID0gKCkgPT4ge1xuICAgIGxldCB0YXNrc1BhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYm90LWNvbnRlbnQtYmxvY2sgdWxcIik7XG4gICAgd2hpbGUgKHRhc2tzUGFyZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgdGFza3NQYXJlbnQucmVtb3ZlQ2hpbGQodGFza3NQYXJlbnQubGFzdENoaWxkKTtcbiAgICB9O1xufTtcblxuY29uc3QgY2xlYXJQcm9qZWN0cyA9ICgpID0+IHtcbiAgICBsZXQgcHJvamVjdHNQYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtY29udGFpbmVyIHVsXCIpO1xuICAgIHdoaWxlIChwcm9qZWN0c1BhcmVudC5maXJzdENoaWxkKSB7XG4gICAgICAgIHByb2plY3RzUGFyZW50LnJlbW92ZUNoaWxkKHByb2plY3RzUGFyZW50Lmxhc3RDaGlsZCk7XG4gICAgfTtcbn07XG5cbmNvbnN0IHJlZnJlc2hQcm9qZWN0cyA9ICgpID0+IHtcbiAgICBjbGVhclByb2plY3RzKCk7XG4gICAgYWRkQWxsUHJvamVjdHNUb1VpKCk7XG59O1xuXG5jb25zdCByZWZyZXNoQ3VycmVudFRhc2tzID0gKCkgPT4ge1xuICAgIGxldCBjdXJyZW50VGFza0xpc3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5saXN0LW5hbWVcIikudGV4dENvbnRlbnQ7XG4gICAgc3dpdGNoIChjdXJyZW50VGFza0xpc3ROYW1lKSB7XG4gICAgICAgIGNhc2UgXCJBTExcIjpcbiAgICAgICAgICAgIGNsZWFyVGFza3MoKTtcbiAgICAgICAgICAgIGFkZEFsbFRhc2tzVG9VaSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJUT0RBWVwiOlxuICAgICAgICAgICAgY2xlYXJUYXNrcygpO1xuICAgICAgICAgICAgYWRkVG9kYXlzVGFza3MoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiV0VFS1wiOlxuICAgICAgICAgICAgY2xlYXJUYXNrcygpO1xuICAgICAgICAgICAgYWRkV2Vla3NUYXNrcygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjbGVhclRhc2tzKCk7XG4gICAgICAgICAgICBhZGRUYXNrc0Zyb21Qcm9qZWN0KGN1cnJlbnRUYXNrTGlzdE5hbWUpO1xuICAgIH07XG4gICAgdGFza0J1dHRvbkxpc3RlbmVycygpO1xufTtcblxuY2xhc3MgSGVhZGVyRWRpdERlbGV0ZSB7XG4gICAgc3RhdGljIGFkZCgpIHtcbiAgICAgICAgbGV0IHBhcmVudENvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpc3QtZWRpdC1kZWxldGVcIik7XG4gICAgICAgIGxldCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIGVkaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkVkaXRcIjtcbiAgICAgICAgbGV0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBkZWxldGVCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICAgICAgICBwYXJlbnRDb250LmFwcGVuZChlZGl0QnV0dG9uKTtcbiAgICAgICAgcGFyZW50Q29udC5hcHBlbmQoZGVsZXRlQnV0dG9uKTtcbiAgICB9O1xuICAgIHN0YXRpYyBjbGVhcigpIHtcbiAgICAgICAgbGV0IHBhcmVudENvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpc3QtZWRpdC1kZWxldGVcIik7XG4gICAgICAgIHdoaWxlIChwYXJlbnRDb250LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIHBhcmVudENvbnQucmVtb3ZlQ2hpbGQocGFyZW50Q29udC5sYXN0Q2hpbGQpO1xuICAgICAgICB9O1xuICAgIH07XG59O1xuXG5jb25zdCBwcm9qZWN0TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGxldCB0YXNrTGlzdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpc3QtbmFtZVwiKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3QtY29udGFpbmVyIHVsIGxpXCIpLmZvckVhY2goKHByb2plY3RDb250KSA9PiB7XG4gICAgICAgIHByb2plY3RDb250LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUYXNrcygpO1xuICAgICAgICAgICAgdGFza0xpc3ROYW1lLnRleHRDb250ZW50ID0gU3RyaW5nKGUudGFyZ2V0LmNsb3Nlc3QoXCJsaVwiKS5kYXRhc2V0LnByb2plY3QpO1xuICAgICAgICAgICAgYWRkVGFza3NGcm9tUHJvamVjdChlLnRhcmdldC5jbG9zZXN0KFwibGlcIikuZGF0YXNldC5wcm9qZWN0KTtcbiAgICAgICAgICAgIHRhc2tCdXR0b25MaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIEhlYWRlckVkaXREZWxldGUuY2xlYXIoKTtcbiAgICAgICAgICAgIEhlYWRlckVkaXREZWxldGUuYWRkKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuY29uc3QgYWxsVG9kYXlXZWVrTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGxldCB0YXNrTGlzdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpc3QtbmFtZVwiKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FsbC10YXNrc1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjbGVhclRhc2tzKCk7XG4gICAgICAgIHRhc2tMaXN0TmFtZS50ZXh0Q29udGVudCA9IFwiQUxMXCI7XG4gICAgICAgIGFkZEFsbFRhc2tzVG9VaSgpO1xuICAgICAgICB0YXNrQnV0dG9uTGlzdGVuZXJzKCk7XG4gICAgICAgIEhlYWRlckVkaXREZWxldGUuY2xlYXIoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvZGF5LXRhc2tzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNsZWFyVGFza3MoKTtcbiAgICAgICAgdGFza0xpc3ROYW1lLnRleHRDb250ZW50ID0gXCJUT0RBWVwiO1xuICAgICAgICBhZGRUb2RheXNUYXNrcygpO1xuICAgICAgICB0YXNrQnV0dG9uTGlzdGVuZXJzKCk7XG4gICAgICAgIEhlYWRlckVkaXREZWxldGUuY2xlYXIoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3dlZWstdGFza3NcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY2xlYXJUYXNrcygpO1xuICAgICAgICB0YXNrTGlzdE5hbWUudGV4dENvbnRlbnQgPSBcIldFRUtcIjtcbiAgICAgICAgYWRkV2Vla3NUYXNrcygpO1xuICAgICAgICB0YXNrQnV0dG9uTGlzdGVuZXJzKCk7XG4gICAgICAgIEhlYWRlckVkaXREZWxldGUuY2xlYXIoKTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZURvbmVMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jaGVja2JveFwiKS5mb3JFYWNoKChjaGVja2JveCkgPT4ge1xuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNoZWNrYm94LmNsYXNzTGlzdC5jb250YWlucyhcImNoZWNrZWRcIikpIHtcbiAgICAgICAgICAgICAgICBjaGVja2JveC5yZW1vdmVDaGlsZChjaGVja2JveC5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hlY2tib3hJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94SW1nLnNyYyA9IFwiLi9pbWcvY2hlY2sucG5nXCI7XG4gICAgICAgICAgICAgICAgY2hlY2tib3guYXBwZW5kQ2hpbGQoY2hlY2tib3hJbWcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCByZWNvbnN0cnVjdGVkUHJvamVjdEFycmF5ID0gcmVjb25zdHJ1Y3RlZFByb2plY3RMaXN0KCk7XG4gICAgICAgICAgICBsZXQgcHJvamVjdEluZGV4ID0gcGFyc2VJbnQoY2hlY2tib3gucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC5wcm9qZWN0SW5kZXgpO1xuICAgICAgICAgICAgbGV0IHRhc2tJbmRleCA9IHBhcnNlSW50KGNoZWNrYm94LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQudGFza0luZGV4KTtcbiAgICAgICAgICAgIHJlY29uc3RydWN0ZWRQcm9qZWN0QXJyYXlbcHJvamVjdEluZGV4XS50YXNrc1t0YXNrSW5kZXhdLnRvZ2dsZURvbmUoKTtcbiAgICAgICAgICAgIFN0b3JhZ2Uuc2F2ZURhdGEocmVjb25zdHJ1Y3RlZFByb2plY3RBcnJheSk7XG4gICAgICAgICAgICBjaGVja2JveC5jbGFzc0xpc3QudG9nZ2xlKFwiY2hlY2tlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBkZWxldGVCdXR0b25MaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kYXRlLWFuZC1lZGl0IHNwYW46bGFzdC1jaGlsZFwiKS5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVjb25zdHJ1Y3RlZFByb2plY3RBcnJheSA9IHJlY29uc3RydWN0ZWRQcm9qZWN0TGlzdCgpO1xuICAgICAgICAgICAgbGV0IHByb2plY3RJbmRleCA9IHBhcnNlSW50KGJ1dHRvbi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0LnByb2plY3RJbmRleCk7XG4gICAgICAgICAgICBsZXQgdGFza0luZGV4ID0gcGFyc2VJbnQoYnV0dG9uLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQudGFza0luZGV4KTtcbiAgICAgICAgICAgIHJlY29uc3RydWN0ZWRQcm9qZWN0QXJyYXlbcHJvamVjdEluZGV4XS50YXNrcy5zcGxpY2UodGFza0luZGV4LCAxKTtcbiAgICAgICAgICAgIFN0b3JhZ2Uuc2F2ZURhdGEocmVjb25zdHJ1Y3RlZFByb2plY3RBcnJheSk7XG4gICAgICAgICAgICByZWZyZXNoQ3VycmVudFRhc2tzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuY29uc3QgdGFza0J1dHRvbkxpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0b2dnbGVEb25lTGlzdGVuZXJzKCk7XG4gICAgZGVsZXRlQnV0dG9uTGlzdGVuZXJzKCk7XG4gICAgdGFza0VkaXRCdXR0b25MaXN0ZW5lcnMoKTtcbn07XG5cbmNvbnN0IHVpTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHByb2plY3RMaXN0ZW5lcnMoKTtcbiAgICBhbGxUb2RheVdlZWtMaXN0ZW5lcnMoKTtcbiAgICB0YXNrQnV0dG9uTGlzdGVuZXJzKCk7XG4gICAgZGVsZXRlQnV0dG9uTGlzdGVuZXJzKCk7XG59O1xuXG5leHBvcnQge2FkZEFsbFRhc2tzVG9VaSwgYWRkQWxsUHJvamVjdHNUb1VpLCB1aUxpc3RlbmVycywgcmVmcmVzaFByb2plY3RzLCBwcm9qZWN0TGlzdGVuZXJzLCByZWZyZXNoQ3VycmVudFRhc2tzfTsiLCJpbXBvcnQgYWRkRGF5cyBmcm9tIFwiLi4vYWRkRGF5cy9pbmRleC5qc1wiO1xuaW1wb3J0IGFkZE1vbnRocyBmcm9tIFwiLi4vYWRkTW9udGhzL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGFkZFxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBZGQgdGhlIHNwZWNpZmllZCB5ZWFycywgbW9udGhzLCB3ZWVrcywgZGF5cywgaG91cnMsIG1pbnV0ZXMgYW5kIHNlY29uZHMgdG8gdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBZGQgdGhlIHNwZWNpZmllZCB5ZWFycywgbW9udGhzLCB3ZWVrcywgZGF5cywgaG91cnMsIG1pbnV0ZXMgYW5kIHNlY29uZHMgdG8gdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGJlIGNoYW5nZWRcbiAqIEBwYXJhbSB7RHVyYXRpb259IGR1cmF0aW9uIC0gdGhlIG9iamVjdCB3aXRoIHllYXJzLCBtb250aHMsIHdlZWtzLCBkYXlzLCBob3VycywgbWludXRlcyBhbmQgc2Vjb25kcyB0byBiZSBhZGRlZC4gUG9zaXRpdmUgZGVjaW1hbHMgd2lsbCBiZSByb3VuZGVkIHVzaW5nIGBNYXRoLmZsb29yYCwgZGVjaW1hbHMgbGVzcyB0aGFuIHplcm8gd2lsbCBiZSByb3VuZGVkIHVzaW5nIGBNYXRoLmNlaWxgLlxuICpcbiAqIHwgS2V5ICAgICAgICAgICAgfCBEZXNjcmlwdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgeWVhcnMgICAgICAgICAgfCBBbW91bnQgb2YgeWVhcnMgdG8gYmUgYWRkZWQgICAgICAgIHxcbiAqIHwgbW9udGhzICAgICAgICAgfCBBbW91bnQgb2YgbW9udGhzIHRvIGJlIGFkZGVkICAgICAgIHxcbiAqIHwgd2Vla3MgICAgICAgICAgfCBBbW91bnQgb2Ygd2Vla3MgdG8gYmUgYWRkZWQgICAgICAgIHxcbiAqIHwgZGF5cyAgICAgICAgICAgfCBBbW91bnQgb2YgZGF5cyB0byBiZSBhZGRlZCAgICAgICAgIHxcbiAqIHwgaG91cnMgICAgICAgICAgfCBBbW91bnQgb2YgaG91cnMgdG8gYmUgYWRkZWQgICAgICAgIHxcbiAqIHwgbWludXRlcyAgICAgICAgfCBBbW91bnQgb2YgbWludXRlcyB0byBiZSBhZGRlZCAgICAgIHxcbiAqIHwgc2Vjb25kcyAgICAgICAgfCBBbW91bnQgb2Ygc2Vjb25kcyB0byBiZSBhZGRlZCAgICAgIHxcbiAqXG4gKiBBbGwgdmFsdWVzIGRlZmF1bHQgdG8gMFxuICpcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgbmV3IGRhdGUgd2l0aCB0aGUgc2Vjb25kcyBhZGRlZFxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBZGQgdGhlIGZvbGxvd2luZyBkdXJhdGlvbiB0byAxIFNlcHRlbWJlciAyMDE0LCAxMDoxOTo1MFxuICogY29uc3QgcmVzdWx0ID0gYWRkKG5ldyBEYXRlKDIwMTQsIDgsIDEsIDEwLCAxOSwgNTApLCB7XG4gKiAgIHllYXJzOiAyLFxuICogICBtb250aHM6IDksXG4gKiAgIHdlZWtzOiAxLFxuICogICBkYXlzOiA3LFxuICogICBob3VyczogNSxcbiAqICAgbWludXRlczogOSxcbiAqICAgc2Vjb25kczogMzAsXG4gKiB9KVxuICogLy89PiBUaHUgSnVuIDE1IDIwMTcgMTU6Mjk6MjBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkKGRpcnR5RGF0ZSwgZHVyYXRpb24pIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIGlmICghZHVyYXRpb24gfHwgdHlwZW9mIGR1cmF0aW9uICE9PSAnb2JqZWN0JykgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIHZhciB5ZWFycyA9IGR1cmF0aW9uLnllYXJzID8gdG9JbnRlZ2VyKGR1cmF0aW9uLnllYXJzKSA6IDA7XG4gIHZhciBtb250aHMgPSBkdXJhdGlvbi5tb250aHMgPyB0b0ludGVnZXIoZHVyYXRpb24ubW9udGhzKSA6IDA7XG4gIHZhciB3ZWVrcyA9IGR1cmF0aW9uLndlZWtzID8gdG9JbnRlZ2VyKGR1cmF0aW9uLndlZWtzKSA6IDA7XG4gIHZhciBkYXlzID0gZHVyYXRpb24uZGF5cyA/IHRvSW50ZWdlcihkdXJhdGlvbi5kYXlzKSA6IDA7XG4gIHZhciBob3VycyA9IGR1cmF0aW9uLmhvdXJzID8gdG9JbnRlZ2VyKGR1cmF0aW9uLmhvdXJzKSA6IDA7XG4gIHZhciBtaW51dGVzID0gZHVyYXRpb24ubWludXRlcyA/IHRvSW50ZWdlcihkdXJhdGlvbi5taW51dGVzKSA6IDA7XG4gIHZhciBzZWNvbmRzID0gZHVyYXRpb24uc2Vjb25kcyA/IHRvSW50ZWdlcihkdXJhdGlvbi5zZWNvbmRzKSA6IDA7IC8vIEFkZCB5ZWFycyBhbmQgbW9udGhzXG5cbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIGRhdGVXaXRoTW9udGhzID0gbW9udGhzIHx8IHllYXJzID8gYWRkTW9udGhzKGRhdGUsIG1vbnRocyArIHllYXJzICogMTIpIDogZGF0ZTsgLy8gQWRkIHdlZWtzIGFuZCBkYXlzXG5cbiAgdmFyIGRhdGVXaXRoRGF5cyA9IGRheXMgfHwgd2Vla3MgPyBhZGREYXlzKGRhdGVXaXRoTW9udGhzLCBkYXlzICsgd2Vla3MgKiA3KSA6IGRhdGVXaXRoTW9udGhzOyAvLyBBZGQgZGF5cywgaG91cnMsIG1pbnV0ZXMgYW5kIHNlY29uZHNcblxuICB2YXIgbWludXRlc1RvQWRkID0gbWludXRlcyArIGhvdXJzICogNjA7XG4gIHZhciBzZWNvbmRzVG9BZGQgPSBzZWNvbmRzICsgbWludXRlc1RvQWRkICogNjA7XG4gIHZhciBtc1RvQWRkID0gc2Vjb25kc1RvQWRkICogMTAwMDtcbiAgdmFyIGZpbmFsRGF0ZSA9IG5ldyBEYXRlKGRhdGVXaXRoRGF5cy5nZXRUaW1lKCkgKyBtc1RvQWRkKTtcbiAgcmV0dXJuIGZpbmFsRGF0ZTtcbn0iLCJpbXBvcnQge1Rhc2ssIFByb2plY3R9IGZyb20gXCIuL2ZhY3Rvcmllcy5qc1wiO1xuaW1wb3J0IHt2YWxpZGF0ZVByb2plY3RGb3JtLCB2YWxpZGF0ZVRhc2tGb3JtLCBjbGVhckVycm9yTWVzc2FnZXN9IGZyb20gXCIuL2Zvcm0tdmFsaWRhdG9ycy5qc1wiO1xuaW1wb3J0IHtTdG9yYWdlfSBmcm9tIFwiLi9zdG9yYWdlLmpzXCI7XG5pbXBvcnQge3JlZnJlc2hQcm9qZWN0cywgcHJvamVjdExpc3RlbmVycywgcmVmcmVzaEN1cnJlbnRUYXNrc30gZnJvbSBcIi4vdWkuanNcIjtcbmltcG9ydCB7cmVjb25zdHJ1Y3RlZFByb2plY3RMaXN0fSBmcm9tIFwiLi9vYmplY3QtbWV0aG9kcy5qc1wiO1xuXG5jb25zdCBjbG9zZVByb2plY3RNb2RhbCA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xufTtcbmNvbnN0IG9wZW5Qcm9qZWN0TW9kYWwgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWZvcm1cIikucmVzZXQoKTtcbiAgICBjbGVhckVycm9yTWVzc2FnZXMoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbn07XG5jb25zdCBjbG9zZVRhc2tNb2RhbCA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGRlbGV0ZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stbW9kYWwgLm1vZGFsLXRvcCBzcGFuOmZpcnN0LWNoaWxkXCIpLmRhdGFzZXQudGFza0luZGV4O1xuICAgIGRlbGV0ZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stbW9kYWwgLm1vZGFsLXRvcCBzcGFuOmZpcnN0LWNoaWxkXCIpLmRhdGFzZXQucHJvamVjdEluZGV4O1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay1tb2RhbCAubW9kYWwtdG9wIHNwYW46Zmlyc3QtY2hpbGRcIikudGV4dENvbnRlbnQgPSBcIkFERCBUQVNLXCI7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLWZvcm0tc3VibWl0XCIpLnRleHRDb250ZW50ID0gXCJBZGQgVGFza1wiO1xufTtcbmNvbnN0IG9wZW5UYXNrTW9kYWwgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLWZvcm1cIikucmVzZXQoKTtcbiAgICBjbGVhckVycm9yTWVzc2FnZXMoKTtcbiAgICBjbGVhckZvcm1PcHRpb25zKCk7XG4gICAgcHJvamVjdHNUb0Zvcm1PcHRpb25zKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG59O1xuY29uc3QgbW9kYWxUb1Byb2plY3QgPSAoKSA9PiB7XG4gICAgbGV0IG5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIikudmFsdWU7XG4gICAgbGV0IGNvbG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb2xvclwiKS52YWx1ZTtcbiAgICByZXR1cm4gbmV3IFByb2plY3QobmFtZSwgY29sb3IpO1xufTtcbmNvbnN0IHByb2plY3RUb0FycmF5ID0gKCkgPT4ge1xuICAgIGxldCBuZXdQcm9qZWN0ID0gbW9kYWxUb1Byb2plY3QoKTtcbiAgICBpZiAoU3RvcmFnZS5nZXREYXRhKCkgPT09IG51bGwpIHtcbiAgICAgICAgbGV0IHByb2plY3RBcnJheSA9IFtdO1xuICAgICAgICBwcm9qZWN0QXJyYXkucHVzaChuZXdQcm9qZWN0KTtcbiAgICAgICAgU3RvcmFnZS5zYXZlRGF0YShwcm9qZWN0QXJyYXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBwcm9qZWN0QXJyYXkgPSBTdG9yYWdlLmdldERhdGEoKTtcbiAgICAgICAgcHJvamVjdEFycmF5LnB1c2gobmV3UHJvamVjdCk7XG4gICAgICAgIFN0b3JhZ2Uuc2F2ZURhdGEocHJvamVjdEFycmF5KTtcbiAgICB9XG59O1xuY29uc3QgbW9kYWxUb1Rhc2sgPSAoKSA9PiB7XG4gICAgbGV0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrXCIpLnZhbHVlO1xuICAgIGxldCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkdWVEYXRlXCIpLnZhbHVlO1xuICAgIHJldHVybiBuZXcgVGFzayh0aXRsZSwgZHVlRGF0ZSk7XG59O1xuY29uc3QgdGFza1RvQXJyYXkgPSAoKSA9PiB7XG4gICAgbGV0IG5ld1Rhc2sgPSBtb2RhbFRvVGFzaygpO1xuICAgIGxldCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdFwiKS52YWx1ZTtcbiAgICBsZXQgcHJvamVjdEFycmF5ID0gU3RvcmFnZS5nZXREYXRhKCk7XG4gICAgcHJvamVjdEFycmF5LmZvckVhY2goKHByb2plY3QpID0+IHtcbiAgICAgICAgaWYgKHByb2plY3QubmFtZSA9PT0gcHJvamVjdE5hbWUpIHtcbiAgICAgICAgICAgIHByb2plY3QudGFza3MucHVzaChuZXdUYXNrKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICBTdG9yYWdlLnNhdmVEYXRhKHByb2plY3RBcnJheSk7XG59O1xuY29uc3QgY2xlYXJGb3JtT3B0aW9ucyA9ICgpID0+IHtcbiAgICBsZXQgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0XCIpO1xuICAgIHdoaWxlIChwYXJlbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQocGFyZW50Lmxhc3RDaGlsZCk7XG4gICAgfTtcbn07XG5jb25zdCBwcm9qZWN0c1RvRm9ybU9wdGlvbnMgPSAoKSA9PiB7XG4gICAgbGV0IHNlbGVjdFBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdFwiKTtcbiAgICBpZiAoU3RvcmFnZS5nZXREYXRhKCkgIT09IG51bGwpIHtcbiAgICAgICAgbGV0IHByb2plY3RBcnJheSA9IFN0b3JhZ2UuZ2V0RGF0YSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHByb2plY3Qgb2YgcHJvamVjdEFycmF5KSB7XG4gICAgICAgICAgICBsZXQgbmV3T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgICAgIG5ld09wdGlvbi52YWx1ZSA9IHByb2plY3QubmFtZTtcbiAgICAgICAgICAgIG5ld09wdGlvbi50ZXh0ID0gcHJvamVjdC5uYW1lO1xuICAgICAgICAgICAgc2VsZWN0UGFyZW50LmFwcGVuZENoaWxkKG5ld09wdGlvbik7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG5cbmNvbnN0IHByb2plY3RFZGl0TW9kYWwgPSAoKSA9PiB7XG4gICAgXG59O1xuXG5jb25zdCB0YXNrRWRpdEJ1dHRvbkxpc3RlbmVycyA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2stZWRpdC1idXR0b25cIikuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgb3BlblRhc2tNb2RhbCgpO1xuICAgICAgICAgICAgbGV0IG1vZGFsSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLW1vZGFsIC5tb2RhbC10b3Agc3BhbjpmaXJzdC1jaGlsZFwiKTtcbiAgICAgICAgICAgIG1vZGFsSGVhZGVyLnRleHRDb250ZW50ID0gXCJFRElUIFRBU0tcIjtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay1mb3JtLXN1Ym1pdFwiKS50ZXh0Q29udGVudCA9IFwiRWRpdCBUYXNrXCI7XG4gICAgICAgICAgICBsZXQgcHJvamVjdEFycmF5ID0gU3RvcmFnZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBsZXQgcHJvamVjdEluZGV4ID0gcGFyc2VJbnQoYnV0dG9uLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucHJvamVjdEluZGV4KTtcbiAgICAgICAgICAgIGxldCB0YXNrSW5kZXggPSBwYXJzZUludChidXR0b24ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZGF0YXNldC50YXNrSW5kZXgpO1xuICAgICAgICAgICAgbW9kYWxIZWFkZXIuZGF0YXNldC5wcm9qZWN0SW5kZXggPSBwcm9qZWN0SW5kZXg7XG4gICAgICAgICAgICBtb2RhbEhlYWRlci5kYXRhc2V0LnRhc2tJbmRleCA9IHRhc2tJbmRleDtcbiAgICAgICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFza1wiKTtcbiAgICAgICAgICAgIGxldCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkdWVEYXRlXCIpO1xuICAgICAgICAgICAgbGV0IHByb2plY3RTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RcIik7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRhc2sgPSBwcm9qZWN0QXJyYXlbcHJvamVjdEluZGV4XS50YXNrc1t0YXNrSW5kZXhdO1xuICAgICAgICAgICAgdGl0bGUudmFsdWUgPSBjdXJyZW50VGFzay5uYW1lO1xuICAgICAgICAgICAgcHJvamVjdFNlbGVjdC52YWx1ZSA9IHByb2plY3RBcnJheVtwcm9qZWN0SW5kZXhdLm5hbWU7XG4gICAgICAgICAgICBpZiAoY3VycmVudFRhc2suZGF0ZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGR1ZURhdGUudmFsdWUgPSBjdXJyZW50VGFzay5kYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IHRhc2tFZGl0U3VibWl0ID0gKCkgPT4ge1xuICAgIGxldCByZWNvbnN0cnVjdGVkUHJvamVjdEFycmF5ID0gcmVjb25zdHJ1Y3RlZFByb2plY3RMaXN0KCk7XG4gICAgbGV0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrXCIpO1xuICAgIGxldCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkdWVEYXRlXCIpO1xuICAgIGxldCBwcm9qZWN0U2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0XCIpO1xuICAgIGxldCBwcm9qZWN0SW5kZXggPSBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stbW9kYWwgLm1vZGFsLXRvcCBzcGFuOmZpcnN0LWNoaWxkXCIpLmRhdGFzZXQucHJvamVjdEluZGV4KTtcbiAgICBsZXQgdGFza0luZGV4ID0gcGFyc2VJbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLW1vZGFsIC5tb2RhbC10b3Agc3BhbjpmaXJzdC1jaGlsZFwiKS5kYXRhc2V0LnRhc2tJbmRleCk7XG4gICAgaWYocHJvamVjdFNlbGVjdC52YWx1ZSA9PT0gcmVjb25zdHJ1Y3RlZFByb2plY3RBcnJheVtwcm9qZWN0SW5kZXhdLm5hbWUpe1xuICAgICAgICByZWNvbnN0cnVjdGVkUHJvamVjdEFycmF5W3Byb2plY3RJbmRleF0udGFza3NbdGFza0luZGV4XS5uZXdOYW1lKHRpdGxlLnZhbHVlKTtcbiAgICAgICAgcmVjb25zdHJ1Y3RlZFByb2plY3RBcnJheVtwcm9qZWN0SW5kZXhdLnRhc2tzW3Rhc2tJbmRleF0ubmV3RGF0ZShkdWVEYXRlLnZhbHVlKTtcbiAgICAgICAgU3RvcmFnZS5zYXZlRGF0YShyZWNvbnN0cnVjdGVkUHJvamVjdEFycmF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZWNvbnN0cnVjdGVkUHJvamVjdEFycmF5W3Byb2plY3RJbmRleF0udGFza3Muc3BsaWNlKHRhc2tJbmRleCwgMSk7XG4gICAgICAgIFN0b3JhZ2Uuc2F2ZURhdGEocmVjb25zdHJ1Y3RlZFByb2plY3RBcnJheSk7XG4gICAgICAgIHRhc2tUb0FycmF5KCk7XG4gICAgfTtcbn07XG5cbmNvbnN0IG1vZGFsTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay1tb2RhbC1jbG9zZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjbG9zZVRhc2tNb2RhbCgpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2tcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgb3BlblRhc2tNb2RhbCgpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdC1tb2RhbC1jbG9zZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjbG9zZVByb2plY3RNb2RhbCgpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXByb2plY3RcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgb3BlblByb2plY3RNb2RhbCgpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay1tb2RhbFwiKSkge1xuICAgICAgICAgICAgY2xvc2VUYXNrTW9kYWwoKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQgPT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LW1vZGFsXCIpKSB7XG4gICAgICAgICAgICBjbG9zZVByb2plY3RNb2RhbCgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWZvcm0tc3VibWl0XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh2YWxpZGF0ZVByb2plY3RGb3JtKCkpIHtcbiAgICAgICAgICAgIHByb2plY3RUb0FycmF5KCk7XG4gICAgICAgICAgICByZWZyZXNoUHJvamVjdHMoKTtcbiAgICAgICAgICAgIHByb2plY3RMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIGNsb3NlUHJvamVjdE1vZGFsKCk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLWZvcm0tc3VibWl0XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh2YWxpZGF0ZVRhc2tGb3JtKCkpIHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stbW9kYWwgLm1vZGFsLXRvcCBzcGFuOmZpcnN0LWNoaWxkXCIpLnRleHRDb250ZW50ID09PSBcIkVESVQgVEFTS1wiKSB7XG4gICAgICAgICAgICAgICAgdGFza0VkaXRTdWJtaXQoKTtcbiAgICAgICAgICAgICAgICBjbG9zZVRhc2tNb2RhbCgpO1xuICAgICAgICAgICAgICAgIHJlZnJlc2hDdXJyZW50VGFza3MoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFza1RvQXJyYXkoKTtcbiAgICAgICAgICAgICAgICBjbG9zZVRhc2tNb2RhbCgpO1xuICAgICAgICAgICAgICAgIHJlZnJlc2hDdXJyZW50VGFza3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stZm9ybS1jYW5jZWxcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY2xvc2VUYXNrTW9kYWwoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtZm9ybS1jYW5jZWxcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY2xvc2VQcm9qZWN0TW9kYWwoKTtcbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7bW9kYWxMaXN0ZW5lcnMsIHRhc2tFZGl0QnV0dG9uTGlzdGVuZXJzfTsiLCJpbXBvcnQge21vZGFsTGlzdGVuZXJzfSBmcm9tIFwiLi9tb2RhbC1jb250cm9scy5qc1wiO1xuaW1wb3J0IHthZGRBbGxQcm9qZWN0c1RvVWksIHVpTGlzdGVuZXJzLCBhZGRBbGxUYXNrc1RvVWl9IGZyb20gXCIuL3VpLmpzXCI7XG5cblxubW9kYWxMaXN0ZW5lcnMoKTtcbmFkZEFsbFRhc2tzVG9VaSgpO1xuYWRkQWxsUHJvamVjdHNUb1VpKCk7XG51aUxpc3RlbmVycygpOyJdLCJuYW1lcyI6WyJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJuYW1lIiwiY29sb3IiLCJ0aGlzIiwidGFza3MiLCJuZXdOYW1lIiwibmV3Q29sb3IiLCJhZGRUYXNrIiwidGFzayIsInB1c2giLCJvdmVyV3JpdGVUYXNrcyIsInRhc2tMaXN0IiwiVGFzayIsImRhdGUiLCJkb25lIiwibmV3RGF0ZSIsInRvZ2dsZURvbmUiLCJjbGVhckVycm9yTWVzc2FnZXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsIlN0b3JhZ2UiLCJzdGF0aWMiLCJkYXRhIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImdldEl0ZW0iLCJNYXRoIiwicG93IiwibWlsbGlzZWNvbmRzSW5Ib3VyIiwicmVxdWlyZWRBcmdzIiwicmVxdWlyZWQiLCJhcmdzIiwibGVuZ3RoIiwiVHlwZUVycm9yIiwidG9JbnRlZ2VyIiwiZGlydHlOdW1iZXIiLCJOYU4iLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsImNlaWwiLCJmbG9vciIsInBhcnNlSVNPIiwiYXJndW1lbnQiLCJkaXJ0eU9wdGlvbnMiLCJhcmd1bWVudHMiLCJvcHRpb25zIiwiYWRkaXRpb25hbERpZ2l0cyIsIlJhbmdlRXJyb3IiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZGF0ZVN0cmluZ3MiLCJzcGxpdERhdGVTdHJpbmciLCJwYXJzZVllYXJSZXN1bHQiLCJwYXJzZVllYXIiLCJwYXJzZURhdGUiLCJyZXN0RGF0ZVN0cmluZyIsInllYXIiLCJnZXRUaW1lIiwib2Zmc2V0IiwidGltZXN0YW1wIiwidGltZSIsInBhcnNlVGltZSIsInRpbWV6b25lIiwiZGlydHlEYXRlIiwicmVzdWx0Iiwic2V0RnVsbFllYXIiLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01vbnRoIiwiZ2V0VVRDRGF0ZSIsInNldEhvdXJzIiwiZ2V0VVRDSG91cnMiLCJnZXRVVENNaW51dGVzIiwiZ2V0VVRDU2Vjb25kcyIsImdldFVUQ01pbGxpc2Vjb25kcyIsInBhcnNlVGltZXpvbmUiLCJwYXR0ZXJucyIsImRhdGVUaW1lRGVsaW1pdGVyIiwidGltZVpvbmVEZWxpbWl0ZXIiLCJkYXRlUmVnZXgiLCJ0aW1lUmVnZXgiLCJ0aW1lem9uZVJlZ2V4IiwiZGF0ZVN0cmluZyIsInRpbWVTdHJpbmciLCJhcnJheSIsInNwbGl0IiwidGVzdCIsInN1YnN0ciIsInRva2VuIiwiZXhlYyIsInJlcGxhY2UiLCJyZWdleCIsIlJlZ0V4cCIsImNhcHR1cmVzIiwibWF0Y2giLCJwYXJzZUludCIsImNlbnR1cnkiLCJzbGljZSIsImlzV2Vla0RhdGUiLCJkYXlPZlllYXIiLCJwYXJzZURhdGVVbml0IiwibW9udGgiLCJkYXkiLCJ3ZWVrIiwiZGF5T2ZXZWVrIiwiX3llYXIiLCJ2YWxpZGF0ZVdlZWtEYXRlIiwiaXNvV2Vla1llYXIiLCJzZXRVVENGdWxsWWVhciIsImRpZmYiLCJnZXRVVENEYXkiLCJzZXRVVENEYXRlIiwiZGF5T2ZJU09XZWVrWWVhciIsImRheXNJbk1vbnRocyIsImlzTGVhcFllYXJJbmRleCIsInZhbGlkYXRlRGF0ZSIsInZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSIsIm1heCIsInZhbHVlIiwiaG91cnMiLCJwYXJzZVRpbWVVbml0IiwibWludXRlcyIsInNlY29uZHMiLCJ2YWxpZGF0ZVRpbWUiLCJwYXJzZUZsb2F0IiwidGltZXpvbmVTdHJpbmciLCJzaWduIiwiX2hvdXJzIiwidmFsaWRhdGVUaW1lem9uZSIsInRvRGF0ZSIsImFyZ1N0ciIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsImNvbXBhcmVBc2MiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdCIsImRhdGVSaWdodCIsImFkZERheXMiLCJkaXJ0eUFtb3VudCIsImFtb3VudCIsInNldERhdGUiLCJnZXREYXRlIiwiYWRkTW9udGhzIiwiZGF5T2ZNb250aCIsImVuZE9mRGVzaXJlZE1vbnRoIiwic2V0TW9udGgiLCJnZXRNb250aCIsImRheXNJbk1vbnRoIiwiZ2V0RnVsbFllYXIiLCJyZWNvbnN0cnVjdGVkUHJvamVjdExpc3QiLCJyZWNvbnN0cnVjdGVkIiwiZ2V0RGF0YSIsImZvckVhY2giLCJwcm9qZWN0IiwibmV3UHJvamVjdCIsImFkZEFsbFByb2plY3RzVG9VaSIsIm9iaiIsInBhcmVudExpIiwiY3JlYXRlRWxlbWVudCIsImRhdGFzZXQiLCJuYW1lQ29udGFpbmVyIiwidGFza0NvdW50ZXIiLCJjb2xvckNpcmNsZSIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiYXBwZW5kQ2hpbGQiLCJhZGRQcm9qZWN0VG9VaSIsImFkZFRhc2t0b1VpIiwicHJvamVjdEluZGV4IiwidGFza0luZGV4IiwiY29sb3JCbG9jayIsImNsYXNzTGlzdCIsImFkZCIsInRhc2tDb250YWluZXIiLCJ0YXNrQW5kQ2hlY2tib3hEaXYiLCJjaGVja2JveERpdiIsImNoZWNrYm94SW1nIiwic3JjIiwidGFza05hbWVEaXYiLCJkYXRlQW5kRWRpdERpdiIsImRhdGVEaXYiLCJlZGl0QnV0dG9uIiwiZWRpdEltZyIsInRyYXNoQnV0dG9uIiwidHJhc2hJbWciLCJhcHBlbmQiLCJwcmVwZW5kIiwiYWRkQWxsVGFza3NUb1VpIiwicHJvamVjdEFycmF5IiwidGFza0NvbG9yIiwiYWRkVGFza3NGcm9tUHJvamVjdCIsInByb2plY3ROYW1lIiwiYWRkVG9kYXlzVGFza3MiLCJ0b2RheSIsInRvSVNPU3RyaW5nIiwiYWRkV2Vla3NUYXNrcyIsIndlZWtGcm9tTm93IiwiZHVyYXRpb24iLCJ5ZWFycyIsIm1vbnRocyIsIndlZWtzIiwiZGF5cyIsImRhdGVXaXRoTW9udGhzIiwiZGF0ZVdpdGhEYXlzIiwibXNUb0FkZCIsImNsZWFyVGFza3MiLCJ0YXNrc1BhcmVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsInJlZnJlc2hDdXJyZW50VGFza3MiLCJjdXJyZW50VGFza0xpc3ROYW1lIiwidGFza0J1dHRvbkxpc3RlbmVycyIsIkhlYWRlckVkaXREZWxldGUiLCJwYXJlbnRDb250IiwiZGVsZXRlQnV0dG9uIiwicHJvamVjdExpc3RlbmVycyIsInRhc2tMaXN0TmFtZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcm9qZWN0Q29udCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiU3RyaW5nIiwidGFyZ2V0IiwiY2xvc2VzdCIsImNsZWFyIiwiZGVsZXRlQnV0dG9uTGlzdGVuZXJzIiwiYnV0dG9uIiwicmVjb25zdHJ1Y3RlZFByb2plY3RBcnJheSIsInBhcmVudEVsZW1lbnQiLCJzcGxpY2UiLCJzYXZlRGF0YSIsImNoZWNrYm94IiwiY29udGFpbnMiLCJ0b2dnbGUiLCJ0YXNrRWRpdEJ1dHRvbkxpc3RlbmVycyIsImNsb3NlUHJvamVjdE1vZGFsIiwiZGlzcGxheSIsImNsb3NlVGFza01vZGFsIiwib3BlblRhc2tNb2RhbCIsInJlc2V0IiwiY2xlYXJGb3JtT3B0aW9ucyIsInByb2plY3RzVG9Gb3JtT3B0aW9ucyIsInRhc2tUb0FycmF5IiwibmV3VGFzayIsInRpdGxlIiwiZHVlRGF0ZSIsIm1vZGFsVG9UYXNrIiwicGFyZW50Iiwic2VsZWN0UGFyZW50IiwibmV3T3B0aW9uIiwidGV4dCIsIm1vZGFsSGVhZGVyIiwicHJvamVjdFNlbGVjdCIsImN1cnJlbnRUYXNrIiwid2luZG93IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInByb2plY3RFcnJvciIsIm5vUHJvamVjdE5hbWVFcnJvcnMiLCJ2YWxpZGF0ZVByb2plY3RGb3JtIiwibW9kYWxUb1Byb2plY3QiLCJwcm9qZWN0VG9BcnJheSIsInByb2plY3RzUGFyZW50IiwiY2xlYXJQcm9qZWN0cyIsInRhc2tOYW1lIiwidGFza0Vycm9yIiwibm9Qcm9qZWN0RXJyb3JzIiwibm9UYXNrRXJyb3JzIiwidmFsaWRhdGVUYXNrRm9ybSIsInRhc2tFZGl0U3VibWl0IiwiYWxsVG9kYXlXZWVrTGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==